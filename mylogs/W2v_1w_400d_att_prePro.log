2018-01-15 21:51:03.286781: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2018-01-15 21:51:03.286811: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2018-01-15 21:51:03.286819: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2018-01-15 21:51:03.286823: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2018-01-15 21:51:03.286828: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2018-01-15 21:51:10.684621: I tensorflow/core/common_runtime/gpu/gpu_device.cc:940] Found device 0 with properties: 
name: Tesla K80
major: 3 minor: 7 memoryClockRate (GHz) 0.8235
pciBusID 6c17:00:00.0
Total memory: 11.17GiB
Free memory: 11.10GiB
2018-01-15 21:51:10.684661: I tensorflow/core/common_runtime/gpu/gpu_device.cc:961] DMA: 0 
2018-01-15 21:51:10.684669: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   Y 
2018-01-15 21:51:10.684682: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla K80, pci bus id: 6c17:00:00.0)
2018-01-15 21:52:05.772117: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla K80, pci bus id: 6c17:00:00.0)
当前的日期和时间是 2018-01-15 21:51:03.286560
keep_prob:0.5
embedding size:400
随机初始化的词：2113
word_to_id.len:7206
maxLenOfSeq:1024      conf.num_steps:10
TrainInput epoch_size：57213
ValidInput epoch_size：7153
TestInput epoch_size：114737
Epoch: 1 Learning rate: 0.200
step / (model.input.epoch_size // 10): 0.000 perplexity: 3168.643 speed: 1370 wps cost:  68
step / (model.input.epoch_size // 10): 0.100 perplexity: 139.885 speed: 2869 wps cost:  47
step / (model.input.epoch_size // 10): 0.200 perplexity: 121.347 speed: 2860 wps cost:  44
step / (model.input.epoch_size // 10): 0.300 perplexity: 113.377 speed: 2864 wps cost:  50
step / (model.input.epoch_size // 10): 0.400 perplexity: 108.764 speed: 2862 wps cost:  44
step / (model.input.epoch_size // 10): 0.500 perplexity: 105.714 speed: 2862 wps cost:  44
step / (model.input.epoch_size // 10): 0.600 perplexity: 103.183 speed: 2860 wps cost:  47
step / (model.input.epoch_size // 10): 0.700 perplexity: 101.288 speed: 2860 wps cost:  48
step / (model.input.epoch_size // 10): 0.800 perplexity: 99.752 speed: 2859 wps cost:  45
step / (model.input.epoch_size // 10): 0.900 perplexity: 98.547 speed: 2860 wps cost:  45
Epoch: 1 Train Perplexity: 97.505 train_allCount: 9154080 train_acc: ['0.3162', '0.4308', '0.4750'] rightCountTopK : [2894157, 3943453, 4347733]
Epoch: 1 Valid Perplexity: 169.379 valid_allCount: 1144480 valid_acc: ['0.2722', '0.3543', '0.4124'] rightCountTopK : [311584, 405485, 471993]
Epoch: 2 Learning rate: 0.200
step / (model.input.epoch_size // 10): 0.000 perplexity: 88.239 speed: 2799 wps cost:  49
step / (model.input.epoch_size // 10): 0.100 perplexity: 88.032 speed: 2855 wps cost:  41
step / (model.input.epoch_size // 10): 0.200 perplexity: 87.401 speed: 2861 wps cost:  50
step / (model.input.epoch_size // 10): 0.300 perplexity: 87.011 speed: 2857 wps cost:  47
step / (model.input.epoch_size // 10): 0.400 perplexity: 86.665 speed: 2859 wps cost:  45
step / (model.input.epoch_size // 10): 0.500 perplexity: 86.442 speed: 2859 wps cost:  43
step / (model.input.epoch_size // 10): 0.600 perplexity: 86.268 speed: 2859 wps cost:  44
step / (model.input.epoch_size // 10): 0.700 perplexity: 86.035 speed: 2857 wps cost:  42
step / (model.input.epoch_size // 10): 0.800 perplexity: 85.861 speed: 2857 wps cost:  44
step / (model.input.epoch_size // 10): 0.900 perplexity: 85.718 speed: 2855 wps cost:  48
Epoch: 2 Train Perplexity: 85.599 train_allCount: 9154080 train_acc: ['0.3241', '0.4429', '0.4868'] rightCountTopK : [2966492, 4054035, 4456462]
Epoch: 2 Valid Perplexity: 168.915 valid_allCount: 1144480 valid_acc: ['0.2723', '0.3544', '0.4148'] rightCountTopK : [311614, 405574, 474687]
Epoch: 3 Learning rate: 0.200
step / (model.input.epoch_size // 10): 0.000 perplexity: 80.647 speed: 3046 wps cost:  40
step / (model.input.epoch_size // 10): 0.100 perplexity: 84.345 speed: 2862 wps cost:  46
step / (model.input.epoch_size // 10): 0.200 perplexity: 83.773 speed: 2830 wps cost:  39
step / (model.input.epoch_size // 10): 0.300 perplexity: 83.576 speed: 2826 wps cost:  45
step / (model.input.epoch_size // 10): 0.400 perplexity: 83.494 speed: 2826 wps cost:  43
step / (model.input.epoch_size // 10): 0.500 perplexity: 83.443 speed: 2828 wps cost:  38
step / (model.input.epoch_size // 10): 0.600 perplexity: 83.366 speed: 2829 wps cost:  39
step / (model.input.epoch_size // 10): 0.700 perplexity: 83.300 speed: 2833 wps cost:  41
step / (model.input.epoch_size // 10): 0.800 perplexity: 83.160 speed: 2833 wps cost:  52
step / (model.input.epoch_size // 10): 0.900 perplexity: 83.161 speed: 2834 wps cost:  40
Epoch: 3 Train Perplexity: 83.086 train_allCount: 9154080 train_acc: ['0.3256', '0.4457', '0.4898'] rightCountTopK : [2980707, 4080148, 4483295]
Epoch: 3 Valid Perplexity: 169.954 valid_allCount: 1144480 valid_acc: ['0.2722', '0.3544', '0.4149'] rightCountTopK : [311556, 405597, 474889]
Epoch: 4 Learning rate: 0.200
step / (model.input.epoch_size // 10): 0.000 perplexity: 53.063 speed: 2643 wps cost:  40
step / (model.input.epoch_size // 10): 0.100 perplexity: 82.398 speed: 2831 wps cost:  41
step / (model.input.epoch_size // 10): 0.200 perplexity: 81.995 speed: 2838 wps cost:  47
step / (model.input.epoch_size // 10): 0.300 perplexity: 81.983 speed: 2832 wps cost:  44
step / (model.input.epoch_size // 10): 0.400 perplexity: 81.938 speed: 2833 wps cost:  45
step / (model.input.epoch_size // 10): 0.500 perplexity: 81.832 speed: 2834 wps cost:  43
step / (model.input.epoch_size // 10): 0.600 perplexity: 81.850 speed: 2833 wps cost:  46
step / (model.input.epoch_size // 10): 0.700 perplexity: 81.771 speed: 2834 wps cost:  44
step / (model.input.epoch_size // 10): 0.800 perplexity: 81.725 speed: 2834 wps cost:  46
step / (model.input.epoch_size // 10): 0.900 perplexity: 81.683 speed: 2836 wps cost:  44
Epoch: 4 Train Perplexity: 81.608 train_allCount: 9154080 train_acc: ['0.3270', '0.4474', '0.4914'] rightCountTopK : [2993132, 4095718, 4497918]
Epoch: 4 Valid Perplexity: 167.558 valid_allCount: 1144480 valid_acc: ['0.2723', '0.3544', '0.4150'] rightCountTopK : [311669, 405564, 474942]
Epoch: 5 Learning rate: 0.100
step / (model.input.epoch_size // 10): 0.000 perplexity: 80.656 speed: 2863 wps cost:  48
step / (model.input.epoch_size // 10): 0.100 perplexity: 79.733 speed: 2838 wps cost:  39
step / (model.input.epoch_size // 10): 0.200 perplexity: 79.341 speed: 2847 wps cost:  44
step / (model.input.epoch_size // 10): 0.300 perplexity: 79.020 speed: 2843 wps cost:  39
step / (model.input.epoch_size // 10): 0.400 perplexity: 78.925 speed: 2846 wps cost:  45
step / (model.input.epoch_size // 10): 0.500 perplexity: 78.728 speed: 2848 wps cost:  45
step / (model.input.epoch_size // 10): 0.600 perplexity: 78.737 speed: 2846 wps cost:  42
step / (model.input.epoch_size // 10): 0.700 perplexity: 78.610 speed: 2844 wps cost:  48
step / (model.input.epoch_size // 10): 0.800 perplexity: 78.609 speed: 2842 wps cost:  41
step / (model.input.epoch_size // 10): 0.900 perplexity: 78.551 speed: 2843 wps cost:  42
Epoch: 5 Train Perplexity: 78.519 train_allCount: 9154080 train_acc: ['0.3301', '0.4520', '0.4956'] rightCountTopK : [3022044, 4137385, 4536839]
Epoch: 5 Valid Perplexity: 167.202 valid_allCount: 1144480 valid_acc: ['0.2722', '0.3545', '0.4134'] rightCountTopK : [311544, 405712, 473083]
Epoch: 6 Learning rate: 0.050
step / (model.input.epoch_size // 10): 0.000 perplexity: 76.067 speed: 2858 wps cost:  42
step / (model.input.epoch_size // 10): 0.100 perplexity: 77.269 speed: 2846 wps cost:  42
step / (model.input.epoch_size // 10): 0.200 perplexity: 77.087 speed: 2848 wps cost:  43
step / (model.input.epoch_size // 10): 0.300 perplexity: 77.077 speed: 2847 wps cost:  48
step / (model.input.epoch_size // 10): 0.400 perplexity: 77.013 speed: 2850 wps cost:  47
step / (model.input.epoch_size // 10): 0.500 perplexity: 76.816 speed: 2850 wps cost:  44
step / (model.input.epoch_size // 10): 0.600 perplexity: 76.823 speed: 2852 wps cost:  41
step / (model.input.epoch_size // 10): 0.700 perplexity: 76.693 speed: 2851 wps cost:  43
step / (model.input.epoch_size // 10): 0.800 perplexity: 76.720 speed: 2851 wps cost:  42
step / (model.input.epoch_size // 10): 0.900 perplexity: 76.749 speed: 2851 wps cost:  50
Epoch: 6 Train Perplexity: 76.741 train_allCount: 9154080 train_acc: ['0.3320', '0.4549', '0.4982'] rightCountTopK : [3039561, 4164266, 4560964]
Epoch: 6 Valid Perplexity: 166.299 valid_allCount: 1144480 valid_acc: ['0.2723', '0.3543', '0.4149'] rightCountTopK : [311603, 405535, 474876]
Epoch: 7 Learning rate: 0.025
step / (model.input.epoch_size // 10): 0.000 perplexity: 71.764 speed: 2868 wps cost:  43
step / (model.input.epoch_size // 10): 0.100 perplexity: 75.850 speed: 2842 wps cost:  46
step / (model.input.epoch_size // 10): 0.200 perplexity: 75.909 speed: 2847 wps cost:  41
step / (model.input.epoch_size // 10): 0.300 perplexity: 75.891 speed: 2842 wps cost:  44
step / (model.input.epoch_size // 10): 0.400 perplexity: 75.910 speed: 2830 wps cost:  47
step / (model.input.epoch_size // 10): 0.500 perplexity: 75.845 speed: 2824 wps cost:  47
step / (model.input.epoch_size // 10): 0.600 perplexity: 75.787 speed: 2823 wps cost:  45
step / (model.input.epoch_size // 10): 0.700 perplexity: 75.713 speed: 2822 wps cost:  45
step / (model.input.epoch_size // 10): 0.800 perplexity: 75.710 speed: 2824 wps cost:  44
step / (model.input.epoch_size // 10): 0.900 perplexity: 75.704 speed: 2825 wps cost:  39
Epoch: 7 Train Perplexity: 75.681 train_allCount: 9154080 train_acc: ['0.3332', '0.4568', '0.5000'] rightCountTopK : [3049691, 4181724, 4577177]
Epoch: 7 Valid Perplexity: 166.325 valid_allCount: 1144480 valid_acc: ['0.2723', '0.3543', '0.4150'] rightCountTopK : [311625, 405525, 474988]
Epoch: 8 Learning rate: 0.013
step / (model.input.epoch_size // 10): 0.000 perplexity: 82.473 speed: 2558 wps cost:  46
step / (model.input.epoch_size // 10): 0.100 perplexity: 75.250 speed: 2839 wps cost:  47
step / (model.input.epoch_size // 10): 0.200 perplexity: 75.363 speed: 2831 wps cost:  44
step / (model.input.epoch_size // 10): 0.300 perplexity: 75.298 speed: 2825 wps cost:  41
step / (model.input.epoch_size // 10): 0.400 perplexity: 75.309 speed: 2824 wps cost:  43
step / (model.input.epoch_size // 10): 0.500 perplexity: 75.249 speed: 2822 wps cost:  47
step / (model.input.epoch_size // 10): 0.600 perplexity: 75.207 speed: 2821 wps cost:  44
step / (model.input.epoch_size // 10): 0.700 perplexity: 75.125 speed: 2821 wps cost:  45
step / (model.input.epoch_size // 10): 0.800 perplexity: 75.173 speed: 2822 wps cost:  42
step / (model.input.epoch_size // 10): 0.900 perplexity: 75.126 speed: 2823 wps cost:  45
Epoch: 8 Train Perplexity: 75.143 train_allCount: 9154080 train_acc: ['0.3339', '0.4578', '0.5011'] rightCountTopK : [3056841, 4190481, 4586951]
Epoch: 8 Valid Perplexity: 166.470 valid_allCount: 1144480 valid_acc: ['0.2723', '0.3544', '0.4150'] rightCountTopK : [311588, 405607, 474945]
Epoch: 9 Learning rate: 0.006
step / (model.input.epoch_size // 10): 0.000 perplexity: 63.106 speed: 2854 wps cost:  37
step / (model.input.epoch_size // 10): 0.100 perplexity: 75.022 speed: 2854 wps cost:  46
step / (model.input.epoch_size // 10): 0.200 perplexity: 75.008 speed: 2837 wps cost:  49
step / (model.input.epoch_size // 10): 0.300 perplexity: 75.055 speed: 2842 wps cost:  43
step / (model.input.epoch_size // 10): 0.400 perplexity: 74.981 speed: 2837 wps cost:  40
step / (model.input.epoch_size // 10): 0.500 perplexity: 74.999 speed: 2839 wps cost:  39
step / (model.input.epoch_size // 10): 0.600 perplexity: 74.926 speed: 2840 wps cost:  45
step / (model.input.epoch_size // 10): 0.700 perplexity: 74.910 speed: 2842 wps cost:  41
step / (model.input.epoch_size // 10): 0.800 perplexity: 74.895 speed: 2839 wps cost:  44
step / (model.input.epoch_size // 10): 0.900 perplexity: 74.819 speed: 2840 wps cost:  42
Epoch: 9 Train Perplexity: 74.882 train_allCount: 9154080 train_acc: ['0.3343', '0.4583', '0.5015'] rightCountTopK : [3059785, 4195424, 4590377]
Epoch: 9 Valid Perplexity: 167.012 valid_allCount: 1144480 valid_acc: ['0.2723', '0.3544', '0.4150'] rightCountTopK : [311668, 405594, 474972]
Epoch: 10 Learning rate: 0.003
step / (model.input.epoch_size // 10): 0.000 perplexity: 79.862 speed: 3236 wps cost:  42
step / (model.input.epoch_size // 10): 0.100 perplexity: 74.870 speed: 2858 wps cost:  39
step / (model.input.epoch_size // 10): 0.200 perplexity: 74.888 speed: 2853 wps cost:  39
step / (model.input.epoch_size // 10): 0.300 perplexity: 74.901 speed: 2850 wps cost:  46
step / (model.input.epoch_size // 10): 0.400 perplexity: 74.809 speed: 2851 wps cost:  45
step / (model.input.epoch_size // 10): 0.500 perplexity: 74.857 speed: 2848 wps cost:  48
step / (model.input.epoch_size // 10): 0.600 perplexity: 74.786 speed: 2846 wps cost:  40
step / (model.input.epoch_size // 10): 0.700 perplexity: 74.821 speed: 2845 wps cost:  40
step / (model.input.epoch_size // 10): 0.800 perplexity: 74.790 speed: 2845 wps cost:  45
step / (model.input.epoch_size // 10): 0.900 perplexity: 74.760 speed: 2847 wps cost:  46
Epoch: 10 Train Perplexity: 74.763 train_allCount: 9154080 train_acc: ['0.3343', '0.4586', '0.5018'] rightCountTopK : [3060290, 4198069, 4593801]
Epoch: 10 Valid Perplexity: 166.833 valid_allCount: 1144480 valid_acc: ['0.2724', '0.3545', '0.4150'] rightCountTopK : [311723, 405678, 474944]
Epoch: 11 Learning rate: 0.002
step / (model.input.epoch_size // 10): 0.000 perplexity: 92.788 speed: 2655 wps cost:  48
step / (model.input.epoch_size // 10): 0.100 perplexity: 74.887 speed: 2857 wps cost:  50
step / (model.input.epoch_size // 10): 0.200 perplexity: 74.996 speed: 2847 wps cost:  45
step / (model.input.epoch_size // 10): 0.300 perplexity: 74.944 speed: 2841 wps cost:  43
step / (model.input.epoch_size // 10): 0.400 perplexity: 74.747 speed: 2842 wps cost:  44
step / (model.input.epoch_size // 10): 0.500 perplexity: 74.767 speed: 2838 wps cost:  42
step / (model.input.epoch_size // 10): 0.600 perplexity: 74.623 speed: 2834 wps cost:  42
step / (model.input.epoch_size // 10): 0.700 perplexity: 74.678 speed: 2832 wps cost:  45
step / (model.input.epoch_size // 10): 0.800 perplexity: 74.666 speed: 2830 wps cost:  45
step / (model.input.epoch_size // 10): 0.900 perplexity: 74.660 speed: 2830 wps cost:  39
Epoch: 11 Train Perplexity: 74.646 train_allCount: 9154080 train_acc: ['0.3344', '0.4587', '0.5019'] rightCountTopK : [3061048, 4199346, 4594465]
Epoch: 11 Valid Perplexity: 166.660 valid_allCount: 1144480 valid_acc: ['0.2723', '0.3544', '0.4150'] rightCountTopK : [311636, 405649, 474952]
Epoch: 12 Learning rate: 0.001
step / (model.input.epoch_size // 10): 0.000 perplexity: 69.049 speed: 2860 wps cost:  40
step / (model.input.epoch_size // 10): 0.100 perplexity: 74.835 speed: 2827 wps cost:  46
step / (model.input.epoch_size // 10): 0.200 perplexity: 74.718 speed: 2827 wps cost:  43
step / (model.input.epoch_size // 10): 0.300 perplexity: 74.849 speed: 2831 wps cost:  40
step / (model.input.epoch_size // 10): 0.400 perplexity: 74.724 speed: 2830 wps cost:  44
step / (model.input.epoch_size // 10): 0.500 perplexity: 74.697 speed: 2829 wps cost:  45
step / (model.input.epoch_size // 10): 0.600 perplexity: 74.619 speed: 2831 wps cost:  36
step / (model.input.epoch_size // 10): 0.700 perplexity: 74.658 speed: 2833 wps cost:  39
step / (model.input.epoch_size // 10): 0.800 perplexity: 74.664 speed: 2832 wps cost:  45
step / (model.input.epoch_size // 10): 0.900 perplexity: 74.659 speed: 2832 wps cost:  44
Epoch: 12 Train Perplexity: 74.674 train_allCount: 9154080 train_acc: ['0.3343', '0.4589', '0.5020'] rightCountTopK : [3060603, 4200525, 4595485]
Epoch: 12 Valid Perplexity: 166.998 valid_allCount: 1144480 valid_acc: ['0.2722', '0.3543', '0.4149'] rightCountTopK : [311574, 405500, 474874]
Epoch: 13 Learning rate: 0.000
step / (model.input.epoch_size // 10): 0.000 perplexity: 78.151 speed: 2588 wps cost:  43
step / (model.input.epoch_size // 10): 0.100 perplexity: 74.417 speed: 2821 wps cost:  50
step / (model.input.epoch_size // 10): 0.200 perplexity: 74.554 speed: 2829 wps cost:  43
step / (model.input.epoch_size // 10): 0.300 perplexity: 74.634 speed: 2836 wps cost:  41
step / (model.input.epoch_size // 10): 0.400 perplexity: 74.616 speed: 2838 wps cost:  40
step / (model.input.epoch_size // 10): 0.500 perplexity: 74.601 speed: 2838 wps cost:  41
step / (model.input.epoch_size // 10): 0.600 perplexity: 74.543 speed: 2836 wps cost:  47
step / (model.input.epoch_size // 10): 0.700 perplexity: 74.582 speed: 2836 wps cost:  42
step / (model.input.epoch_size // 10): 0.800 perplexity: 74.565 speed: 2837 wps cost:  42
step / (model.input.epoch_size // 10): 0.900 perplexity: 74.576 speed: 2837 wps cost:  43
Epoch: 13 Train Perplexity: 74.587 train_allCount: 9154080 train_acc: ['0.3346', '0.4589', '0.5021'] rightCountTopK : [3063052, 4200860, 4595885]
Epoch: 13 Valid Perplexity: 166.939 valid_allCount: 1144480 valid_acc: ['0.2724', '0.3543', '0.4149'] rightCountTopK : [311720, 405451, 474858]
Test Perplexity: 168.039 test_allCount: 1147370.000 test_acc: ['0.2716', '0.3535', '0.4144'] rightCountTopK : [311629, 405568, 475493]
Saving model to /home/pubsrv/data/guorui/data/Res/w2v_1w_400d_att_prePro.
Finished!
当前的日期和时间是 2018-01-16 10:26:48.235760
