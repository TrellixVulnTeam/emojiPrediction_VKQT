2018-04-03 08:09:48.373480: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2018-04-03 08:09:48.373512: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2018-04-03 08:09:48.373519: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2018-04-03 08:09:48.373524: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2018-04-03 08:09:48.373528: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2018-04-03 08:09:54.902921: I tensorflow/core/common_runtime/gpu/gpu_device.cc:940] Found device 0 with properties: 
name: Tesla K80
major: 3 minor: 7 memoryClockRate (GHz) 0.8235
pciBusID 6c17:00:00.0
Total memory: 11.17GiB
Free memory: 11.10GiB
2018-04-03 08:09:54.902965: I tensorflow/core/common_runtime/gpu/gpu_device.cc:961] DMA: 0 
2018-04-03 08:09:54.902972: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   Y 
2018-04-03 08:09:54.902988: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla K80, pci bus id: 6c17:00:00.0)
2018-04-03 08:11:31.008686: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla K80, pci bus id: 6c17:00:00.0)
当前的日期和时间是 2018-04-03 08:09:48.373261
keep_prob:0.5
word_to_id.len:7203
isRandomIni:True
isLiwcCategory:False
isEmojiCoOccur:True
emojiCoOccur_path:/home/pubsrv/data/guorui/data/emoji_coOccur3_fea.txt
isLiwcCount:False
6631784
TrainInput epoch_size：16579
rand ini:(7203, 400)
word size:7203
typeOfEmb:<class 'int'>
embedding size:327
dict中没有的词：0

(7203, 727)
830197
ValidInput epoch_size：2075
rand ini:(7203, 400)
word size:7203
typeOfEmb:<class 'int'>
embedding size:327
dict中没有的词：0

(7203, 727)
831242
TestInput epoch_size：33249
rand ini:(7203, 400)
word size:7203
typeOfEmb:<class 'int'>
embedding size:327
dict中没有的词：0

(7203, 727)
Epoch: 1 Learning rate: 0.200
step / (model.input.epoch_size // 10): 0.001 perplexity: 2516.903 speed: 2481 wps cost:  170
step / (model.input.epoch_size // 10): 0.101 perplexity: 148.923 speed: 4194 wps cost:  113
step / (model.input.epoch_size // 10): 0.200 perplexity: 116.081 speed: 4156 wps cost:  108
step / (model.input.epoch_size // 10): 0.300 perplexity: 101.107 speed: 4136 wps cost:  104
step / (model.input.epoch_size // 10): 0.400 perplexity: 92.134 speed: 4123 wps cost:  96
step / (model.input.epoch_size // 10): 0.500 perplexity: 85.968 speed: 4118 wps cost:  110
step / (model.input.epoch_size // 10): 0.600 perplexity: 81.312 speed: 4110 wps cost:  109
step / (model.input.epoch_size // 10): 0.700 perplexity: 77.673 speed: 4104 wps cost:  108
step / (model.input.epoch_size // 10): 0.800 perplexity: 74.825 speed: 4098 wps cost:  102
step / (model.input.epoch_size // 10): 0.900 perplexity: 72.531 speed: 4094 wps cost:  107
Epoch: 1 Train Perplexity: 70.608 train_allCount: 6631600 train_acc: ['0.3076', '0.4634', '0.5118'] rightCountTopK : [2040139, 3072844, 3393826]
words prediction total: 4148695
word top1 hit total: 1422919   accuracy: 0.342979900908599
word top3 hit total: 2081793   accuracy: 0.5017946607306635
word top5 hit total: 2273346   accuracy: 0.5479665292338917
emoji prediction total: 178531
emoji top1 hit total: 1936   accuracy: 0.010844055094073298
emoji top3 hit total: 13244   accuracy: 0.07418319507536507
emoji top5 hit total: 29751   accuracy: 0.1666433280494704
same emoji prediction total: 603031
same emoji top1 hit total: 437314   accuracy: 0.7251932321887267
same emoji top3 hit total: 550758   accuracy: 0.9133162308405373
same emoji top5 hit total: 561390   accuracy: 0.9309471652369447
diff emoji prediction total: 163648
diff emoji top1 hit total: 6530   accuracy: 0.039902718028940166
diff emoji top3 hit total: 42329   accuracy: 0.25865882870551427
diff emoji top5 hit total: 63014   accuracy: 0.38505817364098555
all emoji prediction total: 945210
all emoji top1 hit total: 445780   recall: 0.4716200632663641
all emoji top3 hit total: 606331   recall: 0.641477555252272
all emoji top5 hit total: 654155   recall: 0.6920737190677204
Epoch: 1 Valid Perplexity: 48.865 valid_allCount: 830000 valid_acc: ['0.3414', '0.4977', '0.5470'] rightCountTopK : [283383, 413078, 454005]
words prediction total: 519832
word top1 hit total: 198221   accuracy: 0.38131742562981885
word top3 hit total: 280888   accuracy: 0.5403438033826313
word top5 hit total: 305763   accuracy: 0.5881958017205559
emoji prediction total: 22489
emoji top1 hit total: 399   accuracy: 0.01774200720352172
emoji top3 hit total: 2320   accuracy: 0.10316154564453733
emoji top5 hit total: 4630   accuracy: 0.20587842945439994
same emoji prediction total: 74449
same emoji top1 hit total: 65898   accuracy: 0.8851428494674206
same emoji top3 hit total: 73105   accuracy: 0.9819473733696893
same emoji top5 hit total: 73542   accuracy: 0.9878171634273126
diff emoji prediction total: 21082
diff emoji top1 hit total: 740   accuracy: 0.0351010340574898
diff emoji top3 hit total: 6530   accuracy: 0.3097429086424438
diff emoji top5 hit total: 9529   accuracy: 0.45199696423489233
all emoji prediction total: 118020
all emoji top1 hit total: 67037   recall: 0.568013895949839
all emoji top3 hit total: 81955   recall: 0.6944162006439587
all emoji top5 hit total: 87701   recall: 0.7431028639213693
Epoch: 2 Learning rate: 0.200
step / (model.input.epoch_size // 10): 0.001 perplexity: 56.167 speed: 4075 wps cost:  100
step / (model.input.epoch_size // 10): 0.101 perplexity: 54.059 speed: 4063 wps cost:  95
step / (model.input.epoch_size // 10): 0.200 perplexity: 53.227 speed: 4051 wps cost:  93
step / (model.input.epoch_size // 10): 0.300 perplexity: 52.871 speed: 4055 wps cost:  95
step / (model.input.epoch_size // 10): 0.400 perplexity: 52.468 speed: 4054 wps cost:  107
step / (model.input.epoch_size // 10): 0.500 perplexity: 52.151 speed: 4052 wps cost:  99
step / (model.input.epoch_size // 10): 0.600 perplexity: 51.872 speed: 4056 wps cost:  93
step / (model.input.epoch_size // 10): 0.700 perplexity: 51.586 speed: 4054 wps cost:  106
step / (model.input.epoch_size // 10): 0.800 perplexity: 51.303 speed: 4057 wps cost:  101
step / (model.input.epoch_size // 10): 0.900 perplexity: 51.110 speed: 4055 wps cost:  100
Epoch: 2 Train Perplexity: 50.837 train_allCount: 6631600 train_acc: ['0.3328', '0.4915', '0.5411'] rightCountTopK : [2206986, 3259544, 3588076]
words prediction total: 4148834
word top1 hit total: 1546990   accuracy: 0.3728734386577048
word top3 hit total: 2215049   accuracy: 0.5338967526779813
word top5 hit total: 2413558   accuracy: 0.5817436899138408
emoji prediction total: 178301
emoji top1 hit total: 3361   accuracy: 0.01885014666210509
emoji top3 hit total: 18952   accuracy: 0.10629216886052238
emoji top5 hit total: 36791   accuracy: 0.20634208445269517
same emoji prediction total: 603844
same emoji top1 hit total: 477122   accuracy: 0.7901411622869483
same emoji top3 hit total: 586159   accuracy: 0.9707126343890143
same emoji top5 hit total: 593368   accuracy: 0.9826511483098284
diff emoji prediction total: 163874
diff emoji top1 hit total: 7415   accuracy: 0.045248178478587205
diff emoji top3 hit total: 46967   accuracy: 0.2866043423605941
diff emoji top5 hit total: 69667   accuracy: 0.4251254012228908
all emoji prediction total: 946019
all emoji top1 hit total: 487898   recall: 0.5157380560009894
all emoji top3 hit total: 652078   recall: 0.6892863673985407
all emoji top5 hit total: 699826   recall: 0.7397589266177529
Epoch: 2 Valid Perplexity: 44.183 valid_allCount: 830000 valid_acc: ['0.3474', '0.5061', '0.5560'] rightCountTopK : [288375, 420051, 461441]
words prediction total: 519771
word top1 hit total: 202256   accuracy: 0.3891252109101893
word top3 hit total: 286694   accuracy: 0.5515775216393374
word top5 hit total: 312165   accuracy: 0.6005817946749626
emoji prediction total: 22534
emoji top1 hit total: 840   accuracy: 0.037277003638945594
emoji top3 hit total: 3061   accuracy: 0.13583917635572912
emoji top5 hit total: 4993   accuracy: 0.221576284725304
same emoji prediction total: 74333
same emoji top1 hit total: 65325   accuracy: 0.8788156000699555
same emoji top3 hit total: 73521   accuracy: 0.9890761841981354
same emoji top5 hit total: 73832   accuracy: 0.99326005946215
diff emoji prediction total: 21150
diff emoji top1 hit total: 692   accuracy: 0.032718676122931445
diff emoji top3 hit total: 6754   accuracy: 0.319338061465721
diff emoji top5 hit total: 10137   accuracy: 0.47929078014184395
all emoji prediction total: 118017
all emoji top1 hit total: 66857   recall: 0.5665031309048696
all emoji top3 hit total: 83336   recall: 0.7061355567418254
all emoji top5 hit total: 88962   recall: 0.753806654973436
Epoch: 3 Learning rate: 0.200
step / (model.input.epoch_size // 10): 0.001 perplexity: 46.767 speed: 4136 wps cost:  96
step / (model.input.epoch_size // 10): 0.101 perplexity: 48.693 speed: 4055 wps cost:  101
step / (model.input.epoch_size // 10): 0.200 perplexity: 48.280 speed: 4059 wps cost:  100
step / (model.input.epoch_size // 10): 0.300 perplexity: 48.194 speed: 4057 wps cost:  96
step / (model.input.epoch_size // 10): 0.400 perplexity: 48.016 speed: 4055 wps cost:  110
step / (model.input.epoch_size // 10): 0.500 perplexity: 47.849 speed: 4053 wps cost:  94
step / (model.input.epoch_size // 10): 0.600 perplexity: 47.755 speed: 4053 wps cost:  99
step / (model.input.epoch_size // 10): 0.700 perplexity: 47.610 speed: 4052 wps cost:  90
step / (model.input.epoch_size // 10): 0.800 perplexity: 47.557 speed: 4051 wps cost:  98
step / (model.input.epoch_size // 10): 0.900 perplexity: 47.436 speed: 4048 wps cost:  88
Epoch: 3 Train Perplexity: 47.339 train_allCount: 6631600 train_acc: ['0.3381', '0.4970', '0.5470'] rightCountTopK : [2242358, 3296191, 3627381]
words prediction total: 4148946
word top1 hit total: 1574501   accuracy: 0.37949421371114495
word top3 hit total: 2243675   accuracy: 0.5407819238910316
word top5 hit total: 2445048   accuracy: 0.5893178653084422
emoji prediction total: 178331
emoji top1 hit total: 3866   accuracy: 0.02167878832059485
emoji top3 hit total: 20460   accuracy: 0.11473047310899395
emoji top5 hit total: 38463   accuracy: 0.21568319585489903
same emoji prediction total: 603136
same emoji top1 hit total: 483951   accuracy: 0.8023911688242784
same emoji top3 hit total: 590168   accuracy: 0.9784990449915111
same emoji top5 hit total: 596184   accuracy: 0.988473578098472
diff emoji prediction total: 164166
diff emoji top1 hit total: 7897   accuracy: 0.048103748644664546
diff emoji top3 hit total: 48150   accuracy: 0.2933006834545521
diff emoji top5 hit total: 71210   accuracy: 0.4337682589573968
all emoji prediction total: 945633
all emoji top1 hit total: 495714   recall: 0.5242139392343541
all emoji top3 hit total: 658778   recall: 0.6966529298364165
all emoji top5 hit total: 705857   recall: 0.7464386289395569
Epoch: 3 Valid Perplexity: 42.313 valid_allCount: 830000 valid_acc: ['0.3506', '0.5093', '0.5596'] rightCountTopK : [291035, 422713, 464435]
words prediction total: 519699
word top1 hit total: 204779   accuracy: 0.3940338542117649
word top3 hit total: 289280   accuracy: 0.5566298953817498
word top5 hit total: 314983   accuracy: 0.6060873698044444
emoji prediction total: 22562
emoji top1 hit total: 680   accuracy: 0.030139172059214608
emoji top3 hit total: 2799   accuracy: 0.12405815087314954
emoji top5 hit total: 5070   accuracy: 0.22471412108855598
same emoji prediction total: 74320
same emoji top1 hit total: 68409   accuracy: 0.9204655543595264
same emoji top3 hit total: 73746   accuracy: 0.9922766415500538
same emoji top5 hit total: 74005   accuracy: 0.9957615715823466
diff emoji prediction total: 21059
diff emoji top1 hit total: 629   accuracy: 0.029868464789401205
diff emoji top3 hit total: 6635   accuracy: 0.31506719217436724
diff emoji top5 hit total: 9962   accuracy: 0.4730519017997056
all emoji prediction total: 117941
all emoji top1 hit total: 69718   recall: 0.5911260715103315
all emoji top3 hit total: 83180   recall: 0.7052678881813789
all emoji top5 hit total: 89037   recall: 0.7549283116134339
Epoch: 4 Learning rate: 0.200
step / (model.input.epoch_size // 10): 0.001 perplexity: 45.216 speed: 4241 wps cost:  93
step / (model.input.epoch_size // 10): 0.101 perplexity: 46.052 speed: 4036 wps cost:  100
step / (model.input.epoch_size // 10): 0.200 perplexity: 45.968 speed: 4039 wps cost:  101
step / (model.input.epoch_size // 10): 0.300 perplexity: 45.889 speed: 4041 wps cost:  95
step / (model.input.epoch_size // 10): 0.400 perplexity: 45.850 speed: 4042 wps cost:  100
step / (model.input.epoch_size // 10): 0.500 perplexity: 45.704 speed: 4042 wps cost:  95
step / (model.input.epoch_size // 10): 0.600 perplexity: 45.587 speed: 4038 wps cost:  98
step / (model.input.epoch_size // 10): 0.700 perplexity: 45.511 speed: 4037 wps cost:  89
step / (model.input.epoch_size // 10): 0.800 perplexity: 45.492 speed: 4036 wps cost:  90
step / (model.input.epoch_size // 10): 0.900 perplexity: 45.450 speed: 4037 wps cost:  102
Epoch: 4 Train Perplexity: 45.395 train_allCount: 6631600 train_acc: ['0.3416', '0.5006', '0.5507'] rightCountTopK : [2265378, 3319656, 3652319]
words prediction total: 4149389
word top1 hit total: 1591646   accuracy: 0.38358563152309894
word top3 hit total: 2262153   accuracy: 0.545177374307398
word top5 hit total: 2464861   accuracy: 0.5940298680118928
emoji prediction total: 178446
emoji top1 hit total: 4184   accuracy: 0.023446869080842384
emoji top3 hit total: 21316   accuracy: 0.11945350414130886
emoji top5 hit total: 39353   accuracy: 0.22053170146711049
same emoji prediction total: 602922
same emoji top1 hit total: 487363   accuracy: 0.8083350748521367
same emoji top3 hit total: 592032   accuracy: 0.981937962124454
same emoji top5 hit total: 597420   accuracy: 0.9908744414700409
diff emoji prediction total: 163859
diff emoji top1 hit total: 8875   accuracy: 0.054162420129501586
diff emoji top3 hit total: 48904   accuracy: 0.298451717635284
diff emoji top5 hit total: 72092   accuracy: 0.43996362726490457
all emoji prediction total: 945227
all emoji top1 hit total: 500422   recall: 0.5294199171204378
all emoji top3 hit total: 662252   recall: 0.7006274683224242
all emoji top5 hit total: 708865   recall: 0.7499415484322813
Epoch: 4 Valid Perplexity: 40.908 valid_allCount: 830000 valid_acc: ['0.3536', '0.5116', '0.5627'] rightCountTopK : [293484, 424643, 467052]
words prediction total: 520060
word top1 hit total: 206792   accuracy: 0.39763104257201093
word top3 hit total: 291247   accuracy: 0.5600257662577395
word top5 hit total: 317074   accuracy: 0.6096873437680268
emoji prediction total: 22513
emoji top1 hit total: 753   accuracy: 0.03344734153600142
emoji top3 hit total: 3033   accuracy: 0.13472216052947186
emoji top5 hit total: 5243   accuracy: 0.2328876649047217
same emoji prediction total: 74188
same emoji top1 hit total: 65977   accuracy: 0.8893217231897342
same emoji top3 hit total: 73622   accuracy: 0.9923707338113981
same emoji top5 hit total: 73892   accuracy: 0.9960101364102011
diff emoji prediction total: 20920
diff emoji top1 hit total: 1066   accuracy: 0.05095602294455067
diff emoji top3 hit total: 6760   accuracy: 0.3231357552581262
diff emoji top5 hit total: 10085   accuracy: 0.48207456978967494
all emoji prediction total: 117621
all emoji top1 hit total: 67796   recall: 0.5763936711981704
all emoji top3 hit total: 83415   recall: 0.7091845843854414
all emoji top5 hit total: 89220   recall: 0.7585380161705818
Epoch: 5 Learning rate: 0.100
step / (model.input.epoch_size // 10): 0.001 perplexity: 44.487 speed: 3660 wps cost:  92
step / (model.input.epoch_size // 10): 0.101 perplexity: 43.645 speed: 4065 wps cost:  98
step / (model.input.epoch_size // 10): 0.200 perplexity: 43.671 speed: 4053 wps cost:  93
step / (model.input.epoch_size // 10): 0.300 perplexity: 43.602 speed: 4051 wps cost:  94
step / (model.input.epoch_size // 10): 0.400 perplexity: 43.540 speed: 4052 wps cost:  102
step / (model.input.epoch_size // 10): 0.500 perplexity: 43.466 speed: 4050 wps cost:  101
step / (model.input.epoch_size // 10): 0.600 perplexity: 43.362 speed: 4049 wps cost:  102
step / (model.input.epoch_size // 10): 0.700 perplexity: 43.310 speed: 4049 wps cost:  100
step / (model.input.epoch_size // 10): 0.800 perplexity: 43.286 speed: 4050 wps cost:  96
step / (model.input.epoch_size // 10): 0.900 perplexity: 43.190 speed: 4048 wps cost:  97
Epoch: 5 Train Perplexity: 43.171 train_allCount: 6631600 train_acc: ['0.3474', '0.5052', '0.5557'] rightCountTopK : [2303570, 3350559, 3685505]
words prediction total: 4148522
word top1 hit total: 1618348   accuracy: 0.39010230631535764
word top3 hit total: 2285315   accuracy: 0.5508745042210214
word top5 hit total: 2489092   accuracy: 0.5999948897462759
emoji prediction total: 178503
emoji top1 hit total: 4558   accuracy: 0.025534584852915636
emoji top3 hit total: 22213   accuracy: 0.12444048559407965
emoji top5 hit total: 40822   accuracy: 0.2286908343277144
same emoji prediction total: 603325
same emoji top1 hit total: 498718   accuracy: 0.826615837235321
same emoji top3 hit total: 594809   accuracy: 0.9858848879128165
same emoji top5 hit total: 599206   accuracy: 0.993172833878921
diff emoji prediction total: 164079
diff emoji top1 hit total: 9153   accuracy: 0.05578410399868356
diff emoji top3 hit total: 50161   accuracy: 0.30571249215317015
diff emoji top5 hit total: 74061   accuracy: 0.45137403324008557
all emoji prediction total: 945907
all emoji top1 hit total: 512429   recall: 0.5417329610627684
all emoji top3 hit total: 667183   recall: 0.7053367825801057
all emoji top5 hit total: 714089   recall: 0.7549251670618782
Epoch: 5 Valid Perplexity: 39.722 valid_allCount: 830000 valid_acc: ['0.3573', '0.5148', '0.5654'] rightCountTopK : [296573, 427320, 469259]
words prediction total: 520066
word top1 hit total: 209021   accuracy: 0.401912449573708
word top3 hit total: 293210   accuracy: 0.5637938261682172
word top5 hit total: 319382   accuracy: 0.6141182080735906
emoji prediction total: 22515
emoji top1 hit total: 548   accuracy: 0.024339329335998222
emoji top3 hit total: 2952   accuracy: 0.13111259160559627
emoji top5 hit total: 5057   accuracy: 0.22460581834332666
same emoji prediction total: 74186
same emoji top1 hit total: 67970   accuracy: 0.9162106057746745
same emoji top3 hit total: 73804   accuracy: 0.9948507804707087
same emoji top5 hit total: 74033   accuracy: 0.9979376162618284
diff emoji prediction total: 21001
diff emoji top1 hit total: 1286   accuracy: 0.061235179277177275
diff emoji top3 hit total: 6986   accuracy: 0.33265082615113567
diff emoji top5 hit total: 10228   accuracy: 0.48702442740821866
all emoji prediction total: 117702
all emoji top1 hit total: 69804   recall: 0.5930570423612173
all emoji top3 hit total: 83742   recall: 0.7114747412958149
all emoji top5 hit total: 89318   recall: 0.7588486176955361
Epoch: 6 Learning rate: 0.050
step / (model.input.epoch_size // 10): 0.001 perplexity: 45.717 speed: 4026 wps cost:  94
step / (model.input.epoch_size // 10): 0.101 perplexity: 42.250 speed: 4080 wps cost:  91
step / (model.input.epoch_size // 10): 0.200 perplexity: 42.384 speed: 4069 wps cost:  90
step / (model.input.epoch_size // 10): 0.300 perplexity: 42.308 speed: 4064 wps cost:  102
step / (model.input.epoch_size // 10): 0.400 perplexity: 42.179 speed: 4059 wps cost:  98
step / (model.input.epoch_size // 10): 0.500 perplexity: 42.155 speed: 4055 wps cost:  92
step / (model.input.epoch_size // 10): 0.600 perplexity: 42.081 speed: 4058 wps cost:  93
step / (model.input.epoch_size // 10): 0.700 perplexity: 42.077 speed: 4056 wps cost:  74
step / (model.input.epoch_size // 10): 0.800 perplexity: 42.060 speed: 4057 wps cost:  88
step / (model.input.epoch_size // 10): 0.900 perplexity: 42.034 speed: 4056 wps cost:  97
Epoch: 6 Train Perplexity: 41.992 train_allCount: 6631600 train_acc: ['0.3505', '0.5080', '0.5585'] rightCountTopK : [2324550, 3369141, 3703459]
words prediction total: 4149524
word top1 hit total: 1633417   accuracy: 0.3936396078200777
word top3 hit total: 2299153   accuracy: 0.5540763229710203
word top5 hit total: 2502490   accuracy: 0.6030788109672338
emoji prediction total: 178436
emoji top1 hit total: 4598   accuracy: 0.025768342711112106
emoji top3 hit total: 22688   accuracy: 0.1271492299760138
emoji top5 hit total: 41171   accuracy: 0.2307325875944316
same emoji prediction total: 602797
same emoji top1 hit total: 504441   accuracy: 0.836833959027666
same emoji top3 hit total: 595618   accuracy: 0.9880905180350931
same emoji top5 hit total: 599460   accuracy: 0.9944641396689101
diff emoji prediction total: 164045
diff emoji top1 hit total: 9810   accuracy: 0.059800664451827246
diff emoji top3 hit total: 51604   accuracy: 0.3145722210369106
diff emoji top5 hit total: 75478   accuracy: 0.46010545886799353
all emoji prediction total: 945278
all emoji top1 hit total: 518849   recall: 0.5488850898889004
all emoji top3 hit total: 669910   recall: 0.7086909882595385
all emoji top5 hit total: 716109   recall: 0.7575644413601078
Epoch: 6 Valid Perplexity: 39.102 valid_allCount: 830000 valid_acc: ['0.3599', '0.5167', '0.5682'] rightCountTopK : [298730, 428821, 471570]
words prediction total: 519475
word top1 hit total: 209956   accuracy: 0.40416959430193944
word top3 hit total: 293710   accuracy: 0.5653977573511718
word top5 hit total: 319775   accuracy: 0.6155734154675393
emoji prediction total: 22515
emoji top1 hit total: 636   accuracy: 0.028247834776815455
emoji top3 hit total: 3022   accuracy: 0.13422163002442816
emoji top5 hit total: 5427   accuracy: 0.24103930712858096
same emoji prediction total: 74719
same emoji top1 hit total: 68160   accuracy: 0.9122177759338321
same emoji top3 hit total: 74354   accuracy: 0.9951150309827487
same emoji top5 hit total: 74586   accuracy: 0.9982199975909741
diff emoji prediction total: 21075
diff emoji top1 hit total: 1593   accuracy: 0.07558718861209965
diff emoji top3 hit total: 7116   accuracy: 0.3376512455516014
diff emoji top5 hit total: 10417   accuracy: 0.49428232502965597
all emoji prediction total: 118309
all emoji top1 hit total: 70389   recall: 0.5949589633924722
all emoji top3 hit total: 84492   recall: 0.7141637576177636
all emoji top5 hit total: 90430   recall: 0.7643543601923776
Epoch: 7 Learning rate: 0.025
step / (model.input.epoch_size // 10): 0.001 perplexity: 44.193 speed: 3812 wps cost:  90
step / (model.input.epoch_size // 10): 0.101 perplexity: 41.927 speed: 4070 wps cost:  101
step / (model.input.epoch_size // 10): 0.200 perplexity: 41.817 speed: 4073 wps cost:  97
step / (model.input.epoch_size // 10): 0.300 perplexity: 41.806 speed: 4070 wps cost:  102
step / (model.input.epoch_size // 10): 0.400 perplexity: 41.632 speed: 4065 wps cost:  87
step / (model.input.epoch_size // 10): 0.500 perplexity: 41.551 speed: 4057 wps cost:  92
step / (model.input.epoch_size // 10): 0.600 perplexity: 41.497 speed: 4052 wps cost:  92
step / (model.input.epoch_size // 10): 0.700 perplexity: 41.497 speed: 4048 wps cost:  89
step / (model.input.epoch_size // 10): 0.800 perplexity: 41.458 speed: 4048 wps cost:  91
step / (model.input.epoch_size // 10): 0.900 perplexity: 41.448 speed: 4049 wps cost:  98
Epoch: 7 Train Perplexity: 41.410 train_allCount: 6631600 train_acc: ['0.3523', '0.5093', '0.5600'] rightCountTopK : [2336248, 3377489, 3713835]
words prediction total: 4149675
word top1 hit total: 1641188   accuracy: 0.395497960683668
word top3 hit total: 2305561   accuracy: 0.5556003783428822
word top5 hit total: 2509859   accuracy: 0.6048326676185485
emoji prediction total: 178602
emoji top1 hit total: 4815   accuracy: 0.026959384553364465
emoji top3 hit total: 23165   accuracy: 0.12970179505268697
emoji top5 hit total: 41871   accuracy: 0.2344374643061108
same emoji prediction total: 602436
same emoji top1 hit total: 508059   accuracy: 0.843341035396291
same emoji top3 hit total: 595959   accuracy: 0.9892486504790551
same emoji top5 hit total: 599484   accuracy: 0.9950998944286198
diff emoji prediction total: 163812
diff emoji top1 hit total: 9736   accuracy: 0.0594339853002222
diff emoji top3 hit total: 51816   accuracy: 0.3163138231631382
diff emoji top5 hit total: 75977   accuracy: 0.4638060703733548
all emoji prediction total: 944850
all emoji top1 hit total: 522610   recall: 0.5531142509393026
all emoji top3 hit total: 670940   recall: 0.7101021326136424
all emoji top5 hit total: 717332   recall: 0.7592019897338201
Epoch: 7 Valid Perplexity: 38.877 valid_allCount: 830000 valid_acc: ['0.3605', '0.5171', '0.5689'] rightCountTopK : [299189, 429157, 472209]
words prediction total: 519741
word top1 hit total: 210652   accuracy: 0.40530187150907854
word top3 hit total: 294748   accuracy: 0.5671055391050542
word top5 hit total: 320848   accuracy: 0.6173228588854833
emoji prediction total: 22551
emoji top1 hit total: 647   accuracy: 0.028690523701831405
emoji top3 hit total: 2952   accuracy: 0.1309032858853266
emoji top5 hit total: 5209   accuracy: 0.23098753935523925
same emoji prediction total: 74208
same emoji top1 hit total: 66696   accuracy: 0.898771021992238
same emoji top3 hit total: 73867   accuracy: 0.9954048081069427
same emoji top5 hit total: 74079   accuracy: 0.9982616429495472
diff emoji prediction total: 21116
diff emoji top1 hit total: 1582   accuracy: 0.07491949232809245
diff emoji top3 hit total: 7157   accuracy: 0.33893729873082024
diff emoji top5 hit total: 10452   accuracy: 0.4949801098692934
all emoji prediction total: 117875
all emoji top1 hit total: 68925   recall: 0.584729586426299
all emoji top3 hit total: 83976   recall: 0.7124156945917285
all emoji top5 hit total: 89740   recall: 0.7613149522799576
Epoch: 8 Learning rate: 0.013
step / (model.input.epoch_size // 10): 0.001 perplexity: 42.370 speed: 4299 wps cost:  100
step / (model.input.epoch_size // 10): 0.101 perplexity: 41.396 speed: 4061 wps cost:  94
step / (model.input.epoch_size // 10): 0.200 perplexity: 41.341 speed: 4054 wps cost:  94
step / (model.input.epoch_size // 10): 0.300 perplexity: 41.279 speed: 4054 wps cost:  99
step / (model.input.epoch_size // 10): 0.400 perplexity: 41.229 speed: 4055 wps cost:  90
step / (model.input.epoch_size // 10): 0.500 perplexity: 41.191 speed: 4053 wps cost:  88
step / (model.input.epoch_size // 10): 0.600 perplexity: 41.162 speed: 4056 wps cost:  88
step / (model.input.epoch_size // 10): 0.700 perplexity: 41.148 speed: 4056 wps cost:  96
step / (model.input.epoch_size // 10): 0.800 perplexity: 41.072 speed: 4059 wps cost:  92
step / (model.input.epoch_size // 10): 0.900 perplexity: 41.086 speed: 4059 wps cost:  97
Epoch: 8 Train Perplexity: 41.065 train_allCount: 6631600 train_acc: ['0.3533', '0.5102', '0.5609'] rightCountTopK : [2342761, 3383767, 3719817]
words prediction total: 4150217
word top1 hit total: 1645595   accuracy: 0.39650818258418774
word top3 hit total: 2309842   accuracy: 0.5565593317168717
word top5 hit total: 2514305   accuracy: 0.6058249484304074
emoji prediction total: 178313
emoji top1 hit total: 4863   accuracy: 0.027272268426867363
emoji top3 hit total: 23239   accuracy: 0.1303270092477834
emoji top5 hit total: 41971   accuracy: 0.23537823938804237
same emoji prediction total: 602914
same emoji top1 hit total: 510594   accuracy: 0.846877000699934
same emoji top3 hit total: 596812   accuracy: 0.9898791535774588
same emoji top5 hit total: 600108   accuracy: 0.9953459365680678
diff emoji prediction total: 163523
diff emoji top1 hit total: 9893   accuracy: 0.06049913467830213
diff emoji top3 hit total: 52010   accuracy: 0.31805923325770685
diff emoji top5 hit total: 76365   accuracy: 0.4669985262012072
all emoji prediction total: 944750
all emoji top1 hit total: 525350   recall: 0.5560730351944959
all emoji top3 hit total: 672061   recall: 0.7113638528711299
all emoji top5 hit total: 718444   recall: 0.7604593807885685
Epoch: 8 Valid Perplexity: 38.665 valid_allCount: 830000 valid_acc: ['0.3613', '0.5178', '0.5694'] rightCountTopK : [299858, 429799, 472571]
words prediction total: 519629
word top1 hit total: 210599   accuracy: 0.40528723377640585
word top3 hit total: 294523   accuracy: 0.5667947708846119
word top5 hit total: 320618   accuracy: 0.6170132921757638
emoji prediction total: 22486
emoji top1 hit total: 776   accuracy: 0.034510362003024105
emoji top3 hit total: 3176   accuracy: 0.14124344036289246
emoji top5 hit total: 5446   accuracy: 0.24219514364493464
same emoji prediction total: 74466
same emoji top1 hit total: 65930   accuracy: 0.8853705046598448
same emoji top3 hit total: 74156   accuracy: 0.995837026293879
same emoji top5 hit total: 74347   accuracy: 0.9984019552547472
diff emoji prediction total: 21090
diff emoji top1 hit total: 1558   accuracy: 0.07387387387387387
diff emoji top3 hit total: 7156   accuracy: 0.33930772878141297
diff emoji top5 hit total: 10477   accuracy: 0.4967757230915126
all emoji prediction total: 118042
all emoji top1 hit total: 68264   recall: 0.578302638044086
all emoji top3 hit total: 84488   recall: 0.7157452432185154
all emoji top5 hit total: 90270   recall: 0.7647278087460395
Epoch: 9 Learning rate: 0.006
step / (model.input.epoch_size // 10): 0.001 perplexity: 41.757 speed: 4102 wps cost:  98
step / (model.input.epoch_size // 10): 0.101 perplexity: 41.220 speed: 4067 wps cost:  88
step / (model.input.epoch_size // 10): 0.200 perplexity: 41.159 speed: 4069 wps cost:  92
step / (model.input.epoch_size // 10): 0.300 perplexity: 41.047 speed: 4070 wps cost:  102
step / (model.input.epoch_size // 10): 0.400 perplexity: 41.020 speed: 4070 wps cost:  94
step / (model.input.epoch_size // 10): 0.500 perplexity: 40.966 speed: 4069 wps cost:  89
step / (model.input.epoch_size // 10): 0.600 perplexity: 40.966 speed: 4069 wps cost:  92
step / (model.input.epoch_size // 10): 0.700 perplexity: 40.980 speed: 4066 wps cost:  90
step / (model.input.epoch_size // 10): 0.800 perplexity: 40.969 speed: 4066 wps cost:  89
step / (model.input.epoch_size // 10): 0.900 perplexity: 40.926 speed: 4064 wps cost:  97
Epoch: 9 Train Perplexity: 40.955 train_allCount: 6631600 train_acc: ['0.3535', '0.5104', '0.5610'] rightCountTopK : [2344479, 3384442, 3720304]
words prediction total: 4148790
word top1 hit total: 1646292   accuracy: 0.3968125646272769
word top3 hit total: 2309669   accuracy: 0.5567090645706338
word top5 hit total: 2514352   accuracy: 0.6060446539834506
emoji prediction total: 178458
emoji top1 hit total: 4774   accuracy: 0.02675139248450616
emoji top3 hit total: 23179   accuracy: 0.12988490289031593
emoji top5 hit total: 41921   accuracy: 0.2349068128074953
same emoji prediction total: 602520
same emoji top1 hit total: 510919   accuracy: 0.8479701918608511
same emoji top3 hit total: 596487   accuracy: 0.9899870543716391
same emoji top5 hit total: 599744   accuracy: 0.9953926840602801
diff emoji prediction total: 164270
diff emoji top1 hit total: 9981   accuracy: 0.06075972484324588
diff emoji top3 hit total: 52538   accuracy: 0.3198271138978511
diff emoji top5 hit total: 76736   accuracy: 0.4671333779752846
all emoji prediction total: 945248
all emoji top1 hit total: 525674   recall: 0.5561228376045229
all emoji top3 hit total: 672204   recall: 0.7111403568164122
all emoji top5 hit total: 718401   recall: 0.7600132452012593
Epoch: 9 Valid Perplexity: 38.656 valid_allCount: 830000 valid_acc: ['0.3613', '0.5178', '0.5693'] rightCountTopK : [299841, 429780, 472555]
words prediction total: 519500
word top1 hit total: 210794   accuracy: 0.40576323387872953
word top3 hit total: 294538   accuracy: 0.5669643888354187
word top5 hit total: 320621   accuracy: 0.617172281039461
emoji prediction total: 22544
emoji top1 hit total: 729   accuracy: 0.03233676366217175
emoji top3 hit total: 3113   accuracy: 0.13808552164655785
emoji top5 hit total: 5447   accuracy: 0.24161639460610362
same emoji prediction total: 74536
same emoji top1 hit total: 66778   accuracy: 0.8959160674036707
same emoji top3 hit total: 74235   accuracy: 0.995961682945154
same emoji top5 hit total: 74428   accuracy: 0.9985510357411184
diff emoji prediction total: 21046
diff emoji top1 hit total: 1514   accuracy: 0.07193766036301436
diff emoji top3 hit total: 7116   accuracy: 0.33811650669961035
diff emoji top5 hit total: 10411   accuracy: 0.4946783236719567
all emoji prediction total: 118126
all emoji top1 hit total: 69021   recall: 0.5842998154512977
all emoji top3 hit total: 84464   recall: 0.7150331002488868
all emoji top5 hit total: 90286   recall: 0.764319455496673
Epoch: 10 Learning rate: 0.003
step / (model.input.epoch_size // 10): 0.001 perplexity: 39.297 speed: 3882 wps cost:  88
step / (model.input.epoch_size // 10): 0.101 perplexity: 41.034 speed: 4058 wps cost:  91
step / (model.input.epoch_size // 10): 0.200 perplexity: 41.014 speed: 4055 wps cost:  84
step / (model.input.epoch_size // 10): 0.300 perplexity: 40.888 speed: 4054 wps cost:  101
step / (model.input.epoch_size // 10): 0.400 perplexity: 40.833 speed: 4052 wps cost:  93
step / (model.input.epoch_size // 10): 0.500 perplexity: 40.830 speed: 4054 wps cost:  99
step / (model.input.epoch_size // 10): 0.600 perplexity: 40.851 speed: 4058 wps cost:  100
step / (model.input.epoch_size // 10): 0.700 perplexity: 40.831 speed: 4060 wps cost:  91
step / (model.input.epoch_size // 10): 0.800 perplexity: 40.829 speed: 4061 wps cost:  84
step / (model.input.epoch_size // 10): 0.900 perplexity: 40.799 speed: 4060 wps cost:  95
Epoch: 10 Train Perplexity: 40.811 train_allCount: 6631600 train_acc: ['0.3538', '0.5108', '0.5616'] rightCountTopK : [2346574, 3387470, 3724138]
words prediction total: 4149568
word top1 hit total: 1648474   accuracy: 0.3972640043493684
word top3 hit total: 2312617   accuracy: 0.5573151229236393
word top5 hit total: 2517391   accuracy: 0.6066633924302481
emoji prediction total: 178336
emoji top1 hit total: 4797   accuracy: 0.026898663197559663
emoji top3 hit total: 23212   accuracy: 0.13015880136371794
emoji top5 hit total: 42023   accuracy: 0.23563946707338956
same emoji prediction total: 602575
same emoji top1 hit total: 511230   accuracy: 0.8484089117537236
same emoji top3 hit total: 596704   accuracy: 0.9902568145044185
same emoji top5 hit total: 599934   accuracy: 0.9956171430942207
diff emoji prediction total: 163657
diff emoji top1 hit total: 9987   accuracy: 0.06102397086589636
diff emoji top3 hit total: 52376   accuracy: 0.32003519556144866
diff emoji top5 hit total: 76654   accuracy: 0.4683820429312526
all emoji prediction total: 944568
all emoji top1 hit total: 526014   recall: 0.5568831465812943
all emoji top3 hit total: 672292   recall: 0.7117454751801882
all emoji top5 hit total: 718611   recall: 0.7607827070152705
Epoch: 10 Valid Perplexity: 38.589 valid_allCount: 830000 valid_acc: ['0.3612', '0.5180', '0.5694'] rightCountTopK : [299773, 429972, 472593]
words prediction total: 519807
word top1 hit total: 210889   accuracy: 0.4057063487024992
word top3 hit total: 294909   accuracy: 0.5673432639421939
word top5 hit total: 320987   accuracy: 0.6175118842185657
emoji prediction total: 22507
emoji top1 hit total: 763   accuracy: 0.03390056426889412
emoji top3 hit total: 3116   accuracy: 0.13844581685697782
emoji top5 hit total: 5404   accuracy: 0.2401030790420758
same emoji prediction total: 74270
same emoji top1 hit total: 66826   accuracy: 0.8997711054261478
same emoji top3 hit total: 73964   accuracy: 0.9958798976706611
same emoji top5 hit total: 74154   accuracy: 0.9984381311431264
diff emoji prediction total: 21208
diff emoji top1 hit total: 1613   accuracy: 0.0760562052055828
diff emoji top3 hit total: 7264   accuracy: 0.34251225952470765
diff emoji top5 hit total: 10597   accuracy: 0.49966993587325537
all emoji prediction total: 117985
all emoji top1 hit total: 69202   recall: 0.586532186294868
all emoji top3 hit total: 84344   recall: 0.7148705343899648
all emoji top5 hit total: 90155   recall: 0.7641225579522821
Epoch: 11 Learning rate: 0.002
step / (model.input.epoch_size // 10): 0.001 perplexity: 42.425 speed: 4419 wps cost:  94
step / (model.input.epoch_size // 10): 0.101 perplexity: 41.119 speed: 4085 wps cost:  88
step / (model.input.epoch_size // 10): 0.200 perplexity: 40.941 speed: 4081 wps cost:  94
step / (model.input.epoch_size // 10): 0.300 perplexity: 40.895 speed: 4084 wps cost:  86
step / (model.input.epoch_size // 10): 0.400 perplexity: 40.848 speed: 4078 wps cost:  90
step / (model.input.epoch_size // 10): 0.500 perplexity: 40.875 speed: 4079 wps cost:  95
step / (model.input.epoch_size // 10): 0.600 perplexity: 40.863 speed: 4073 wps cost:  97
step / (model.input.epoch_size // 10): 0.700 perplexity: 40.782 speed: 4069 wps cost:  97
step / (model.input.epoch_size // 10): 0.800 perplexity: 40.789 speed: 4069 wps cost:  104
step / (model.input.epoch_size // 10): 0.900 perplexity: 40.789 speed: 4068 wps cost:  78
Epoch: 11 Train Perplexity: 40.814 train_allCount: 6631600 train_acc: ['0.3540', '0.5108', '0.5616'] rightCountTopK : [2347790, 3387095, 3724102]
words prediction total: 4149104
word top1 hit total: 1648820   accuracy: 0.39739182242720356
word top3 hit total: 2312173   accuracy: 0.5572704371835462
word top5 hit total: 2517074   accuracy: 0.6066548343931606
emoji prediction total: 178485
emoji top1 hit total: 4842   accuracy: 0.0271283301117741
emoji top3 hit total: 23223   accuracy: 0.13011177409866376
emoji top5 hit total: 42081   accuracy: 0.23576771157240103
same emoji prediction total: 602693
same emoji top1 hit total: 511666   accuracy: 0.8489662232678993
same emoji top3 hit total: 596782   accuracy: 0.990192353320845
same emoji top5 hit total: 599989   accuracy: 0.9955134703738056
diff emoji prediction total: 163700
diff emoji top1 hit total: 10011   accuracy: 0.06115455100794136
diff emoji top3 hit total: 52171   accuracy: 0.31869883934025656
diff emoji top5 hit total: 76646   accuracy: 0.4682101405009163
all emoji prediction total: 944878
all emoji top1 hit total: 526519   recall: 0.5572349022836811
all emoji top3 hit total: 672176   recall: 0.7113891952188537
all emoji top5 hit total: 718716   recall: 0.7606442313187523
Epoch: 11 Valid Perplexity: 38.437 valid_allCount: 830000 valid_acc: ['0.3621', '0.5189', '0.5700'] rightCountTopK : [300571, 430692, 473119]
words prediction total: 519382
word top1 hit total: 211115   accuracy: 0.4064734626921996
word top3 hit total: 294940   accuracy: 0.567867196013724
word top5 hit total: 320905   accuracy: 0.6178593020166274
emoji prediction total: 22608
emoji top1 hit total: 832   accuracy: 0.03680113234253362
emoji top3 hit total: 3256   accuracy: 0.14401981599433827
emoji top5 hit total: 5546   accuracy: 0.24531139419674453
same emoji prediction total: 74685
same emoji top1 hit total: 67522   accuracy: 0.9040905134899913
same emoji top3 hit total: 74388   accuracy: 0.9960232978509741
same emoji top5 hit total: 74578   accuracy: 0.9985673160607886
diff emoji prediction total: 21173
diff emoji top1 hit total: 1699   accuracy: 0.08024370660747178
diff emoji top3 hit total: 7265   accuracy: 0.34312567893071366
diff emoji top5 hit total: 10555   accuracy: 0.49851225617531764
all emoji prediction total: 118466
all emoji top1 hit total: 70053   recall: 0.5913342224773352
all emoji top3 hit total: 84909   recall: 0.7167372917123901
all emoji top5 hit total: 90679   recall: 0.7654432495399524
Epoch: 12 Learning rate: 0.001
step / (model.input.epoch_size // 10): 0.001 perplexity: 41.363 speed: 4335 wps cost:  97
step / (model.input.epoch_size // 10): 0.101 perplexity: 40.963 speed: 4080 wps cost:  89
step / (model.input.epoch_size // 10): 0.200 perplexity: 40.666 speed: 4067 wps cost:  96
step / (model.input.epoch_size // 10): 0.300 perplexity: 40.733 speed: 4066 wps cost:  92
step / (model.input.epoch_size // 10): 0.400 perplexity: 40.697 speed: 4064 wps cost:  99
step / (model.input.epoch_size // 10): 0.500 perplexity: 40.722 speed: 4065 wps cost:  91
step / (model.input.epoch_size // 10): 0.600 perplexity: 40.761 speed: 4067 wps cost:  88
step / (model.input.epoch_size // 10): 0.700 perplexity: 40.736 speed: 4069 wps cost:  92
step / (model.input.epoch_size // 10): 0.800 perplexity: 40.715 speed: 4069 wps cost:  83
step / (model.input.epoch_size // 10): 0.900 perplexity: 40.755 speed: 4068 wps cost:  83
Epoch: 12 Train Perplexity: 40.773 train_allCount: 6631600 train_acc: ['0.3542', '0.5108', '0.5616'] rightCountTopK : [2348915, 3387555, 3724411]
words prediction total: 4150011
word top1 hit total: 1649698   accuracy: 0.39751653670315573
word top3 hit total: 2312489   accuracy: 0.557224788078875
word top5 hit total: 2517920   accuracy: 0.6067261026537039
emoji prediction total: 178263
emoji top1 hit total: 4772   accuracy: 0.026769436170153087
emoji top3 hit total: 23316   accuracy: 0.13079551000488043
emoji top5 hit total: 42128   accuracy: 0.23632498050633052
same emoji prediction total: 602825
same emoji top1 hit total: 512295   accuracy: 0.8498237465267698
same emoji top3 hit total: 597009   accuracy: 0.9903520922324057
same emoji top5 hit total: 600259   accuracy: 0.9957433749429768
diff emoji prediction total: 163653
diff emoji top1 hit total: 9871   accuracy: 0.060316645585476586
diff emoji top3 hit total: 52198   accuracy: 0.31895535065046166
diff emoji top5 hit total: 76351   accuracy: 0.466542012673156
all emoji prediction total: 944741
all emoji top1 hit total: 526938   recall: 0.5577592165471806
all emoji top3 hit total: 672523   recall: 0.7118596525396907
all emoji top5 hit total: 718738   recall: 0.760777821646356
Epoch: 12 Valid Perplexity: 38.623 valid_allCount: 830000 valid_acc: ['0.3612', '0.5180', '0.5695'] rightCountTopK : [299834, 429926, 472695]
words prediction total: 519716
word top1 hit total: 210917   accuracy: 0.40583126168907635
word top3 hit total: 294884   accuracy: 0.5673945000731169
word top5 hit total: 320956   accuracy: 0.6175603598888624
emoji prediction total: 22546
emoji top1 hit total: 760   accuracy: 0.03370886188237381
emoji top3 hit total: 3110   accuracy: 0.13794021112392443
emoji top5 hit total: 5447   accuracy: 0.2415949614122239
same emoji prediction total: 74209
same emoji top1 hit total: 66944   accuracy: 0.9021008233502675
same emoji top3 hit total: 73920   accuracy: 0.9961055936611463
same emoji top5 hit total: 74107   accuracy: 0.9986255036451104
diff emoji prediction total: 21171
diff emoji top1 hit total: 1596   accuracy: 0.0753861414198668
diff emoji top3 hit total: 7226   accuracy: 0.3413159510651363
diff emoji top5 hit total: 10559   accuracy: 0.4987482877521137
all emoji prediction total: 117926
all emoji top1 hit total: 69300   recall: 0.5876566660448077
all emoji top3 hit total: 84256   recall: 0.7144819632650985
all emoji top5 hit total: 90113   recall: 0.7641487034241813
Epoch: 13 Learning rate: 0.000
step / (model.input.epoch_size // 10): 0.001 perplexity: 27.155 speed: 4432 wps cost:  83
step / (model.input.epoch_size // 10): 0.101 perplexity: 40.884 speed: 4077 wps cost:  93
step / (model.input.epoch_size // 10): 0.200 perplexity: 40.809 speed: 4074 wps cost:  87
step / (model.input.epoch_size // 10): 0.300 perplexity: 40.730 speed: 4072 wps cost:  96
step / (model.input.epoch_size // 10): 0.400 perplexity: 40.737 speed: 4067 wps cost:  103
step / (model.input.epoch_size // 10): 0.500 perplexity: 40.752 speed: 4066 wps cost:  89
step / (model.input.epoch_size // 10): 0.600 perplexity: 40.752 speed: 4067 wps cost:  91
step / (model.input.epoch_size // 10): 0.700 perplexity: 40.746 speed: 4065 wps cost:  86
step / (model.input.epoch_size // 10): 0.800 perplexity: 40.718 speed: 4061 wps cost:  97
step / (model.input.epoch_size // 10): 0.900 perplexity: 40.742 speed: 4063 wps cost:  89
Epoch: 13 Train Perplexity: 40.768 train_allCount: 6631600 train_acc: ['0.3542', '0.5110', '0.5618'] rightCountTopK : [2349141, 3388559, 3725362]
words prediction total: 4148946
word top1 hit total: 1649445   accuracy: 0.39755759655584816
word top3 hit total: 2312713   accuracy: 0.5574218126724233
word top5 hit total: 2517287   accuracy: 0.6067292753388451
emoji prediction total: 178501
emoji top1 hit total: 4846   accuracy: 0.02714830729239612
emoji top3 hit total: 23313   accuracy: 0.1306043103399981
emoji top5 hit total: 42237   accuracy: 0.2366205231343242
same emoji prediction total: 603287
same emoji top1 hit total: 512171   accuracy: 0.8489674068892583
same emoji top3 hit total: 597357   accuracy: 0.9901705158572951
same emoji top5 hit total: 600650   accuracy: 0.9956289460903351
diff emoji prediction total: 163460
diff emoji top1 hit total: 10025   accuracy: 0.061329988988131655
diff emoji top3 hit total: 52397   accuracy: 0.32054936987642235
diff emoji top5 hit total: 76549   accuracy: 0.46830417227456256
all emoji prediction total: 945248
all emoji top1 hit total: 527042   recall: 0.5575700768475574
all emoji top3 hit total: 673067   recall: 0.712053344730695
all emoji top5 hit total: 719436   recall: 0.7611081959443448
Epoch: 13 Valid Perplexity: 38.520 valid_allCount: 830000 valid_acc: ['0.3617', '0.5184', '0.5699'] rightCountTopK : [300252, 430309, 473016]
words prediction total: 519779
word top1 hit total: 211254   accuracy: 0.40643042523841866
word top3 hit total: 295068   accuracy: 0.5676797254217658
word top5 hit total: 321175   accuracy: 0.6179068411767309
emoji prediction total: 22541
emoji top1 hit total: 759   accuracy: 0.03367197551129054
emoji top3 hit total: 3138   accuracy: 0.13921298966328025
emoji top5 hit total: 5462   accuracy: 0.2423140055898141
same emoji prediction total: 74426
same emoji top1 hit total: 67288   accuracy: 0.9040926557923307
same emoji top3 hit total: 74130   accuracy: 0.996022895224787
same emoji top5 hit total: 74317   accuracy: 0.9985354580388573
diff emoji prediction total: 20979
diff emoji top1 hit total: 1520   accuracy: 0.07245340578673912
diff emoji top3 hit total: 7118   accuracy: 0.339291672625006
diff emoji top5 hit total: 10427   accuracy: 0.49702083035416367
all emoji prediction total: 117946
all emoji top1 hit total: 69567   recall: 0.5898207654350296
all emoji top3 hit total: 84386   recall: 0.7154630084954131
all emoji top5 hit total: 90206   recall: 0.7648076238278534
Test Perplexity: 37.760 test_allCount: 831225.000 test_acc: ['0.3639', '0.5208', '0.5728'] rightCountTopK : [302484, 432887, 476091]
words prediction total: 517645
word top1 hit total: 210496   accuracy: 0.40664161732461435
word top3 hit total: 294556   accuracy: 0.5690308995547141
word top5 hit total: 320570   accuracy: 0.6192854176124564
emoji prediction total: 22339
emoji top1 hit total: 629   accuracy: 0.028157034782219436
emoji top3 hit total: 3035   accuracy: 0.1358610501812973
emoji top5 hit total: 5392   accuracy: 0.24137159228255517
same emoji prediction total: 77852
same emoji top1 hit total: 70913   accuracy: 0.9108693418280841
same emoji top3 hit total: 77524   accuracy: 0.9957868776653137
same emoji top5 hit total: 77723   accuracy: 0.9983430098134922
diff emoji prediction total: 21315
diff emoji top1 hit total: 1146   accuracy: 0.0537649542575651
diff emoji top3 hit total: 7140   accuracy: 0.33497536945812806
diff emoji top5 hit total: 10757   accuracy: 0.5046680741262022
all emoji prediction total: 121506
all emoji top1 hit total: 72688   recall: 0.5982256020278834
all emoji top3 hit total: 87699   recall: 0.721766826329564
all emoji top5 hit total: 93872   recall: 0.7725709018484684
Saving model to /home/pubsrv/data/guorui/data/Res/rand_emojiCoOccur_scale/0.
Finished!
当前的日期和时间是 2018-04-03 14:40:31.175894
