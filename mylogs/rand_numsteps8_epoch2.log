2018-04-25 15:12:48.947365: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA
2018-04-25 15:12:49.749624: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found device 0 with properties: 
name: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235
pciBusID: c4da:00:00.0
totalMemory: 11.17GiB freeMemory: 2.99GiB
2018-04-25 15:12:49.749662: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: Tesla K80, pci bus id: c4da:00:00.0, compute capability: 3.7)
2018-04-25 15:13:24.968840: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: Tesla K80, pci bus id: c4da:00:00.0, compute capability: 3.7)
/usr/lib/python3.6/importlib/_bootstrap.py:219: RuntimeWarning: compiletime version 3.5 of module 'tensorflow.python.framework.fast_tensor_util' does not match runtime version 3.6
  return f(*args, **kwds)
当前的日期和时间是 2018-04-25 15:12:48.947113
keep_prob:0.5
word_to_id.len:7203
isRandomIni:True
isLiwcCategory:False
isEmojiCoOccur:False
isLiwcCount:False
id of <eos> :  7033
id of <unk> :  7032
6631784
TrainInput epoch_size：16579
rand ini:(7203, 400)
(7203, 400)
830197
ValidInput epoch_size：2075
rand ini:(7203, 400)
(7203, 400)
831242
TestInput epoch_size：33249
rand ini:(7203, 400)
(7203, 400)
Test Perplexity: 35.905 test_allCount: 831225.000 test_acc: ['0.3704', '0.5257', '0.5777'] rightCountTopK : [307845, 436959, 480192]
words prediction total: 486087
word top1 hit total: 200770   accuracy: 0.4130330578682417
word top3 hit total: 271455   accuracy: 0.5584494133766178
word top5 hit total: 294712   accuracy: 0.6062947579342792
emoji prediction total: 22342
emoji top1 hit total: 647   accuracy: 0.028958911467191838
emoji top3 hit total: 3319   accuracy: 0.14855429236415718
emoji top5 hit total: 5711   accuracy: 0.25561722316712915
same emoji prediction total: 77836
same emoji top1 hit total: 72361   accuracy: 0.9296597975229971
same emoji top3 hit total: 77685   accuracy: 0.998060023639447
same emoji top5 hit total: 77762   accuracy: 0.9990492831080734
diff emoji prediction total: 21362
diff emoji top1 hit total: 1892   accuracy: 0.08856848609680741
diff emoji top3 hit total: 7614   accuracy: 0.3564273008145305
diff emoji top5 hit total: 10982   accuracy: 0.5140904409699466
all emoji prediction total: 121540
all emoji top1 hit total: 74900   recall: 0.6162580220503537
all emoji top3 hit total: 88618   recall: 0.7291262135922331
all emoji top5 hit total: 94455   recall: 0.777151555043607
top1_emoji_total: 115144   pred1_emoji_ratio: 0.1894978333747513
top3_emoji_total: 345696   pred3_emoji_ratio: 0.5689279771965366
goal_unk_total: 32644   goal_unk_ratio: 0.053723748286366474
top1_unk_total: 115144   pred1_unk_ratio: 0.0746806840380694
top3_unk_total: 345696   pred3_unk_ratio: 0.4274760667317285
Saving model to /home/pubsrv/data/guorui/data/Res/rand/0.
Finished!
当前的日期和时间是 2018-04-25 15:36:02.108125
2018-04-27 15:30:56.781960: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2018-04-27 15:30:56.781986: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2018-04-27 15:30:56.781993: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2018-04-27 15:30:56.781998: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2018-04-27 15:30:56.782003: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2018-04-27 15:31:03.736048: I tensorflow/core/common_runtime/gpu/gpu_device.cc:940] Found device 0 with properties: 
name: Tesla K80
major: 3 minor: 7 memoryClockRate (GHz) 0.8235
pciBusID a17a:00:00.0
Total memory: 11.17GiB
Free memory: 11.10GiB
2018-04-27 15:31:03.736093: I tensorflow/core/common_runtime/gpu/gpu_device.cc:961] DMA: 0 
2018-04-27 15:31:03.736101: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   Y 
2018-04-27 15:31:03.736117: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla K80, pci bus id: a17a:00:00.0)
2018-04-27 15:31:32.436467: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla K80, pci bus id: a17a:00:00.0)
Traceback (most recent call last):
  File "/usr/local/anaconda3/lib/python3.6/runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "/usr/local/anaconda3/lib/python3.6/runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "/home/guorui/Code/emojiPridiction/ptb/emoji_liwc_concat.py", line 1107, in <module>
    tf.app.run()
  File "/usr/local/anaconda3/lib/python3.6/site-packages/tensorflow/python/platform/app.py", line 48, in run
    _sys.exit(main(_sys.argv[:1] + flags_passthrough))
  File "/home/guorui/Code/emojiPridiction/ptb/emoji_liwc_concat.py", line 990, in main
    (i + 1, valid_perplexity, valid_allCount, valid_acc, val_rightCountTopK))
TypeError: unsupported operand type(s) for +: 'datetime.datetime' and 'int'
当前的日期和时间是 2018-04-27 15:30:56.781740
keep_prob:0.5
word_to_id.len:7203
isRandomIni:True
isLiwcCategory:False
isEmojiCoOccur:False
isLiwcCount:False
id of <eos> :  7033
id of <unk> :  7032
6631784
TrainInput epoch_size：51810
rand ini:(7203, 400)
(7203, 400)
830197
ValidInput epoch_size：6485
rand ini:(7203, 400)
(7203, 400)
831242
TestInput epoch_size：103905
rand ini:(7203, 400)
(7203, 400)
Epoch: 1 Learning rate: 0.200
step / (model.input.epoch_size // 10): 0.000 perplexity: 3245.630 speed: 1477 wps cost:  50
step / (model.input.epoch_size // 10): 0.100 perplexity: 108.158 speed: 3914 wps cost:  40
step / (model.input.epoch_size // 10): 0.200 perplexity: 86.238 speed: 3956 wps cost:  31
step / (model.input.epoch_size // 10): 0.300 perplexity: 76.867 speed: 3968 wps cost:  31
step / (model.input.epoch_size // 10): 0.400 perplexity: 71.559 speed: 3978 wps cost:  33
step / (model.input.epoch_size // 10): 0.500 perplexity: 67.911 speed: 3989 wps cost:  34
step / (model.input.epoch_size // 10): 0.600 perplexity: 65.123 speed: 3988 wps cost:  34
step / (model.input.epoch_size // 10): 0.700 perplexity: 63.110 speed: 3981 wps cost:  29
step / (model.input.epoch_size // 10): 0.800 perplexity: 61.418 speed: 3981 wps cost:  30
step / (model.input.epoch_size // 10): 0.900 perplexity: 60.128 speed: 3984 wps cost:  37
Epoch: 1 Train Perplexity: 59.006 train_allCount: 6631680 train_acc: ['0.3239', '0.4793', '0.5277'] rightCountTopK : [2147832, 3178846, 3499503]
words prediction total: 3895751
word top1 hit total: 1416180   accuracy: 0.3635191263507344
word top3 hit total: 1957526   accuracy: 0.502477186041921
word top5 hit total: 2124340   accuracy: 0.5452966578202765
emoji prediction total: 178429
emoji top1 hit total: 3386   accuracy: 0.018976735844509582
emoji top3 hit total: 17707   accuracy: 0.09923835250996195
emoji top5 hit total: 34703   accuracy: 0.1944919267607844
same emoji prediction total: 602328
same emoji top1 hit total: 455620   accuracy: 0.7564317116255594
same emoji top3 hit total: 562529   accuracy: 0.9339247054760861
same emoji top5 hit total: 570654   accuracy: 0.9474140335498267
diff emoji prediction total: 163758
diff emoji top1 hit total: 7428   accuracy: 0.04535961601875939
diff emoji top3 hit total: 43688   accuracy: 0.2667839128470059
diff emoji top5 hit total: 64162   accuracy: 0.3918098657775498
all emoji prediction total: 944515
all emoji top1 hit total: 466434   recall: 0.49383440178292565
all emoji top3 hit total: 623924   recall: 0.6605760628470697
all emoji top5 hit total: 669519   recall: 0.7088495153597348
当前的日期和时间是 2018-04-27 16:02:03.965442
2018-04-27 16:27:27.533478: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2018-04-27 16:27:27.533507: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2018-04-27 16:27:27.533514: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2018-04-27 16:27:27.533519: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2018-04-27 16:27:27.533524: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2018-04-27 16:27:34.197337: I tensorflow/core/common_runtime/gpu/gpu_device.cc:940] Found device 0 with properties: 
name: Tesla K80
major: 3 minor: 7 memoryClockRate (GHz) 0.8235
pciBusID a17a:00:00.0
Total memory: 11.17GiB
Free memory: 11.10GiB
2018-04-27 16:27:34.197381: I tensorflow/core/common_runtime/gpu/gpu_device.cc:961] DMA: 0 
2018-04-27 16:27:34.197389: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   Y 
2018-04-27 16:27:34.197404: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla K80, pci bus id: a17a:00:00.0)
2018-04-27 16:28:00.135188: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla K80, pci bus id: a17a:00:00.0)
Traceback (most recent call last):
  File "/usr/local/anaconda3/lib/python3.6/runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "/usr/local/anaconda3/lib/python3.6/runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "/home/guorui/Code/emojiPridiction/ptb/emoji_liwc_concat.py", line 1107, in <module>
    tf.app.run()
  File "/usr/local/anaconda3/lib/python3.6/site-packages/tensorflow/python/platform/app.py", line 48, in run
    _sys.exit(main(_sys.argv[:1] + flags_passthrough))
  File "/home/guorui/Code/emojiPridiction/ptb/emoji_liwc_concat.py", line 990, in main
    (i + 1, valid_perplexity, valid_allCount, valid_acc, val_rightCountTopK))
TypeError: unsupported operand type(s) for +: 'datetime.datetime' and 'int'
当前的日期和时间是 2018-04-27 16:27:27.533259
keep_prob:0.5
word_to_id.len:7203
isRandomIni:True
isLiwcCategory:False
isEmojiCoOccur:False
isLiwcCount:False
id of <eos> :  7033
id of <unk> :  7032
6631784
TrainInput epoch_size：51810
rand ini:(7203, 400)
(7203, 400)
830197
ValidInput epoch_size：6485
rand ini:(7203, 400)
(7203, 400)
831242
TestInput epoch_size：103905
rand ini:(7203, 400)
(7203, 400)
Epoch: 1 Learning rate: 0.200
step / (model.input.epoch_size // 10): 0.000 perplexity: 3083.220 speed: 1822 wps cost:  51
step / (model.input.epoch_size // 10): 0.100 perplexity: 107.850 speed: 3873 wps cost:  35
step / (model.input.epoch_size // 10): 0.200 perplexity: 86.042 speed: 3935 wps cost:  28
step / (model.input.epoch_size // 10): 0.300 perplexity: 76.769 speed: 3955 wps cost:  31
step / (model.input.epoch_size // 10): 0.400 perplexity: 71.488 speed: 3957 wps cost:  29
step / (model.input.epoch_size // 10): 0.500 perplexity: 67.838 speed: 3958 wps cost:  30
step / (model.input.epoch_size // 10): 0.600 perplexity: 65.060 speed: 3966 wps cost:  31
step / (model.input.epoch_size // 10): 0.700 perplexity: 63.039 speed: 3970 wps cost:  31
step / (model.input.epoch_size // 10): 0.800 perplexity: 61.362 speed: 3974 wps cost:  29
step / (model.input.epoch_size // 10): 0.900 perplexity: 60.062 speed: 3976 wps cost:  33
Epoch: 1 Train Perplexity: 58.937 train_allCount: 6631680 train_acc: ['0.3239', '0.4794', '0.5279'] rightCountTopK : [2148125, 3179227, 3501083]
words prediction total: 3895425
word top1 hit total: 1417407   accuracy: 0.36386453339494407
word top3 hit total: 1958323   accuracy: 0.5027238362951411
word top5 hit total: 2124865   accuracy: 0.5454770660454251
emoji prediction total: 178398
emoji top1 hit total: 3178   accuracy: 0.01781410105494456
emoji top3 hit total: 17524   accuracy: 0.09822980078251999
emoji top5 hit total: 34808   accuracy: 0.1951142950033072
same emoji prediction total: 602654
same emoji top1 hit total: 455113   accuracy: 0.7551812482784483
same emoji top3 hit total: 562566   accuracy: 0.9334809028065856
same emoji top5 hit total: 570885   accuracy: 0.947284843376133
diff emoji prediction total: 163835
diff emoji top1 hit total: 7485   accuracy: 0.045686208685567796
diff emoji top3 hit total: 43986   accuracy: 0.2684774315622425
diff emoji top5 hit total: 64383   accuracy: 0.39297463911862546
all emoji prediction total: 944887
all emoji top1 hit total: 465776   recall: 0.49294360066335974
all emoji top3 hit total: 624076   recall: 0.6604768612543087
all emoji top5 hit total: 670076   recall: 0.7091599312933716
当前的日期和时间是 2018-04-27 16:58:35.011460
