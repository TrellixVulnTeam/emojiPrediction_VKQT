2018-01-15 16:20:12.826363: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2018-01-15 16:20:12.826390: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2018-01-15 16:20:12.826397: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2018-01-15 16:20:12.826402: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2018-01-15 16:20:12.826407: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2018-01-15 16:20:21.282509: I tensorflow/core/common_runtime/gpu/gpu_device.cc:940] Found device 0 with properties: 
name: Tesla K80
major: 3 minor: 7 memoryClockRate (GHz) 0.8235
pciBusID ed4b:00:00.0
Total memory: 11.17GiB
Free memory: 11.10GiB
2018-01-15 16:20:21.282549: I tensorflow/core/common_runtime/gpu/gpu_device.cc:961] DMA: 0 
2018-01-15 16:20:21.282557: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   Y 
2018-01-15 16:20:21.282571: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla K80, pci bus id: ed4b:00:00.0)
2018-01-15 16:20:58.308464: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla K80, pci bus id: ed4b:00:00.0)
当前的日期和时间是 2018-01-15 16:20:12.826140
keep_prob:0.5
word_to_id.len:7206
maxLenOfSeq:1024      conf.num_steps:10
TrainInput epoch_size：45770
ValidInput epoch_size：5722
TestInput epoch_size：114737
Epoch: 1 Learning rate: 1.000
step / (model.input.epoch_size // 10): 0.000 perplexity: 1450.832 speed: 1595 wps cost:  72
step / (model.input.epoch_size // 10): 0.100 perplexity: 97.920 speed: 3844 wps cost:  43
step / (model.input.epoch_size // 10): 0.200 perplexity: 83.662 speed: 3850 wps cost:  47
step / (model.input.epoch_size // 10): 0.300 perplexity: 77.015 speed: 3850 wps cost:  44
step / (model.input.epoch_size // 10): 0.400 perplexity: 73.104 speed: 3850 wps cost:  41
step / (model.input.epoch_size // 10): 0.500 perplexity: 70.262 speed: 3850 wps cost:  38
step / (model.input.epoch_size // 10): 0.600 perplexity: 68.394 speed: 3849 wps cost:  42
step / (model.input.epoch_size // 10): 0.700 perplexity: 66.770 speed: 3849 wps cost:  36
step / (model.input.epoch_size // 10): 0.800 perplexity: 65.516 speed: 3849 wps cost:  42
step / (model.input.epoch_size // 10): 0.900 perplexity: 64.484 speed: 3849 wps cost:  38
Epoch: 1 Train Perplexity: 63.609 train_allCount: 9154000 train_acc: ['0.3527', '0.4786', '0.5193'] rightCountTopK : [3228703, 4381341, 4753704]
Epoch: 1 Valid Perplexity: 55.900 valid_allCount: 1144400 valid_acc: ['0.3564', '0.4882', '0.5303'] rightCountTopK : [407829, 558725, 606917]
Epoch: 2 Learning rate: 1.000
step / (model.input.epoch_size // 10): 0.000 perplexity: 61.813 speed: 3931 wps cost:  40
step / (model.input.epoch_size // 10): 0.100 perplexity: 55.143 speed: 3851 wps cost:  37
step / (model.input.epoch_size // 10): 0.200 perplexity: 55.210 speed: 3850 wps cost:  43
step / (model.input.epoch_size // 10): 0.300 perplexity: 54.928 speed: 3848 wps cost:  39
step / (model.input.epoch_size // 10): 0.400 perplexity: 54.767 speed: 3848 wps cost:  44
step / (model.input.epoch_size // 10): 0.500 perplexity: 54.530 speed: 3848 wps cost:  37
step / (model.input.epoch_size // 10): 0.600 perplexity: 54.424 speed: 3848 wps cost:  41
step / (model.input.epoch_size // 10): 0.700 perplexity: 54.285 speed: 3848 wps cost:  39
step / (model.input.epoch_size // 10): 0.800 perplexity: 54.214 speed: 3848 wps cost:  40
step / (model.input.epoch_size // 10): 0.900 perplexity: 54.120 speed: 3848 wps cost:  39
Epoch: 2 Train Perplexity: 54.034 train_allCount: 9154000 train_acc: ['0.3647', '0.4913', '0.5320'] rightCountTopK : [3338486, 4497047, 4869902]
Epoch: 2 Valid Perplexity: 53.867 valid_allCount: 1144400 valid_acc: ['0.3568', '0.4914', '0.5335'] rightCountTopK : [408332, 562389, 610486]
Epoch: 3 Learning rate: 1.000
step / (model.input.epoch_size // 10): 0.000 perplexity: 54.259 speed: 3939 wps cost:  40
step / (model.input.epoch_size // 10): 0.100 perplexity: 52.905 speed: 3848 wps cost:  41
step / (model.input.epoch_size // 10): 0.200 perplexity: 53.036 speed: 3846 wps cost:  35
step / (model.input.epoch_size // 10): 0.300 perplexity: 52.724 speed: 3847 wps cost:  41
step / (model.input.epoch_size // 10): 0.400 perplexity: 52.744 speed: 3847 wps cost:  46
step / (model.input.epoch_size // 10): 0.500 perplexity: 52.656 speed: 3846 wps cost:  36
step / (model.input.epoch_size // 10): 0.600 perplexity: 52.603 speed: 3847 wps cost:  38
step / (model.input.epoch_size // 10): 0.700 perplexity: 52.512 speed: 3846 wps cost:  40
step / (model.input.epoch_size // 10): 0.800 perplexity: 52.487 speed: 3846 wps cost:  37
step / (model.input.epoch_size // 10): 0.900 perplexity: 52.462 speed: 3846 wps cost:  37
Epoch: 3 Train Perplexity: 52.434 train_allCount: 9154000 train_acc: ['0.3666', '0.4927', '0.5335'] rightCountTopK : [3355598, 4509801, 4883844]
Epoch: 3 Valid Perplexity: 54.562 valid_allCount: 1144400 valid_acc: ['0.3547', '0.4894', '0.5326'] rightCountTopK : [405869, 560058, 609468]
Epoch: 4 Learning rate: 1.000
step / (model.input.epoch_size // 10): 0.000 perplexity: 58.012 speed: 3596 wps cost:  43
step / (model.input.epoch_size // 10): 0.100 perplexity: 52.560 speed: 3843 wps cost:  38
step / (model.input.epoch_size // 10): 0.200 perplexity: 52.140 speed: 3845 wps cost:  41
step / (model.input.epoch_size // 10): 0.300 perplexity: 51.907 speed: 3845 wps cost:  40
step / (model.input.epoch_size // 10): 0.400 perplexity: 51.927 speed: 3845 wps cost:  41
step / (model.input.epoch_size // 10): 0.500 perplexity: 51.934 speed: 3845 wps cost:  42
step / (model.input.epoch_size // 10): 0.600 perplexity: 51.867 speed: 3844 wps cost:  39
step / (model.input.epoch_size // 10): 0.700 perplexity: 51.839 speed: 3844 wps cost:  41
step / (model.input.epoch_size // 10): 0.800 perplexity: 51.846 speed: 3844 wps cost:  38
step / (model.input.epoch_size // 10): 0.900 perplexity: 51.818 speed: 3844 wps cost:  40
Epoch: 4 Train Perplexity: 51.803 train_allCount: 9154000 train_acc: ['0.3673', '0.4930', '0.5338'] rightCountTopK : [3362359, 4512517, 4886772]
Epoch: 4 Valid Perplexity: 54.947 valid_allCount: 1144400 valid_acc: ['0.3556', '0.4888', '0.5328'] rightCountTopK : [406940, 559415, 609699]
Epoch: 5 Learning rate: 0.500
step / (model.input.epoch_size // 10): 0.000 perplexity: 45.637 speed: 3908 wps cost:  37
step / (model.input.epoch_size // 10): 0.100 perplexity: 49.952 speed: 3843 wps cost:  38
step / (model.input.epoch_size // 10): 0.200 perplexity: 49.329 speed: 3843 wps cost:  41
step / (model.input.epoch_size // 10): 0.300 perplexity: 49.018 speed: 3842 wps cost:  40
step / (model.input.epoch_size // 10): 0.400 perplexity: 48.834 speed: 3842 wps cost:  37
step / (model.input.epoch_size // 10): 0.500 perplexity: 48.692 speed: 3842 wps cost:  39
step / (model.input.epoch_size // 10): 0.600 perplexity: 48.526 speed: 3842 wps cost:  36
step / (model.input.epoch_size // 10): 0.700 perplexity: 48.390 speed: 3842 wps cost:  39
step / (model.input.epoch_size // 10): 0.800 perplexity: 48.302 speed: 3842 wps cost:  32
step / (model.input.epoch_size // 10): 0.900 perplexity: 48.205 speed: 3842 wps cost:  34
Epoch: 5 Train Perplexity: 48.105 train_allCount: 9154000 train_acc: ['0.3775', '0.4991', '0.5393'] rightCountTopK : [3455496, 4568785, 4936657]
Epoch: 5 Valid Perplexity: 59.905 valid_allCount: 1144400 valid_acc: ['0.3394', '0.4796', '0.5279'] rightCountTopK : [388412, 548842, 604131]
Epoch: 6 Learning rate: 0.250
step / (model.input.epoch_size // 10): 0.000 perplexity: 39.415 speed: 3932 wps cost:  40
step / (model.input.epoch_size // 10): 0.100 perplexity: 47.174 speed: 3844 wps cost:  39
step / (model.input.epoch_size // 10): 0.200 perplexity: 46.679 speed: 3844 wps cost:  38
step / (model.input.epoch_size // 10): 0.300 perplexity: 46.449 speed: 3844 wps cost:  36
step / (model.input.epoch_size // 10): 0.400 perplexity: 46.276 speed: 3844 wps cost:  37
step / (model.input.epoch_size // 10): 0.500 perplexity: 46.267 speed: 3844 wps cost:  34
step / (model.input.epoch_size // 10): 0.600 perplexity: 46.124 speed: 3843 wps cost:  43
step / (model.input.epoch_size // 10): 0.700 perplexity: 46.047 speed: 3843 wps cost:  35
step / (model.input.epoch_size // 10): 0.800 perplexity: 45.960 speed: 3843 wps cost:  38
step / (model.input.epoch_size // 10): 0.900 perplexity: 45.877 speed: 3843 wps cost:  40
Epoch: 6 Train Perplexity: 45.812 train_allCount: 9154000 train_acc: ['0.3838', '0.5032', '0.5431'] rightCountTopK : [3513756, 4606212, 4971918]
Epoch: 6 Valid Perplexity: 59.794 valid_allCount: 1144400 valid_acc: ['0.3431', '0.4802', '0.5265'] rightCountTopK : [392661, 549525, 602557]
Epoch: 7 Learning rate: 0.125
step / (model.input.epoch_size // 10): 0.000 perplexity: 45.804 speed: 3902 wps cost:  35
step / (model.input.epoch_size // 10): 0.100 perplexity: 45.828 speed: 3845 wps cost:  40
step / (model.input.epoch_size // 10): 0.200 perplexity: 45.310 speed: 3843 wps cost:  39
step / (model.input.epoch_size // 10): 0.300 perplexity: 45.235 speed: 3844 wps cost:  38
step / (model.input.epoch_size // 10): 0.400 perplexity: 45.020 speed: 3843 wps cost:  39
step / (model.input.epoch_size // 10): 0.500 perplexity: 45.013 speed: 3843 wps cost:  40
step / (model.input.epoch_size // 10): 0.600 perplexity: 44.879 speed: 3843 wps cost:  35
step / (model.input.epoch_size // 10): 0.700 perplexity: 44.836 speed: 3843 wps cost:  45
step / (model.input.epoch_size // 10): 0.800 perplexity: 44.754 speed: 3843 wps cost:  40
step / (model.input.epoch_size // 10): 0.900 perplexity: 44.677 speed: 3843 wps cost:  40
Epoch: 7 Train Perplexity: 44.642 train_allCount: 9154000 train_acc: ['0.3874', '0.5052', '0.5452'] rightCountTopK : [3546519, 4624227, 4990490]
Epoch: 7 Valid Perplexity: 66.154 valid_allCount: 1144400 valid_acc: ['0.3261', '0.4675', '0.5172'] rightCountTopK : [373147, 535023, 591855]
Epoch: 8 Learning rate: 0.062
step / (model.input.epoch_size // 10): 0.000 perplexity: 41.441 speed: 3563 wps cost:  37
step / (model.input.epoch_size // 10): 0.100 perplexity: 44.997 speed: 3842 wps cost:  38
step / (model.input.epoch_size // 10): 0.200 perplexity: 44.573 speed: 3842 wps cost:  37
step / (model.input.epoch_size // 10): 0.300 perplexity: 44.577 speed: 3842 wps cost:  37
step / (model.input.epoch_size // 10): 0.400 perplexity: 44.413 speed: 3843 wps cost:  40
step / (model.input.epoch_size // 10): 0.500 perplexity: 44.352 speed: 3842 wps cost:  40
step / (model.input.epoch_size // 10): 0.600 perplexity: 44.241 speed: 3842 wps cost:  38
step / (model.input.epoch_size // 10): 0.700 perplexity: 44.168 speed: 3842 wps cost:  39
step / (model.input.epoch_size // 10): 0.800 perplexity: 44.124 speed: 3842 wps cost:  36
step / (model.input.epoch_size // 10): 0.900 perplexity: 44.047 speed: 3842 wps cost:  34
Epoch: 8 Train Perplexity: 44.051 train_allCount: 9154000 train_acc: ['0.3890', '0.5062', '0.5463'] rightCountTopK : [3560951, 4633545, 5000397]
Epoch: 8 Valid Perplexity: 69.357 valid_allCount: 1144400 valid_acc: ['0.3154', '0.4588', '0.5110'] rightCountTopK : [360943, 525004, 584773]
Epoch: 9 Learning rate: 0.031
step / (model.input.epoch_size // 10): 0.000 perplexity: 43.034 speed: 3911 wps cost:  40
step / (model.input.epoch_size // 10): 0.100 perplexity: 44.324 speed: 3841 wps cost:  42
step / (model.input.epoch_size // 10): 0.200 perplexity: 44.027 speed: 3842 wps cost:  38
step / (model.input.epoch_size // 10): 0.300 perplexity: 44.046 speed: 3843 wps cost:  38
step / (model.input.epoch_size // 10): 0.400 perplexity: 43.989 speed: 3842 wps cost:  40
step / (model.input.epoch_size // 10): 0.500 perplexity: 43.918 speed: 3843 wps cost:  40
step / (model.input.epoch_size // 10): 0.600 perplexity: 43.834 speed: 3842 wps cost:  40
step / (model.input.epoch_size // 10): 0.700 perplexity: 43.789 speed: 3842 wps cost:  39
step / (model.input.epoch_size // 10): 0.800 perplexity: 43.718 speed: 3842 wps cost:  41
step / (model.input.epoch_size // 10): 0.900 perplexity: 43.653 speed: 3842 wps cost:  33
Epoch: 9 Train Perplexity: 43.711 train_allCount: 9154000 train_acc: ['0.3899', '0.5068', '0.5469'] rightCountTopK : [3569557, 4638832, 5006731]
Epoch: 9 Valid Perplexity: 70.815 valid_allCount: 1144400 valid_acc: ['0.3121', '0.4550', '0.5076'] rightCountTopK : [357182, 520685, 580939]
Epoch: 10 Learning rate: 0.016
step / (model.input.epoch_size // 10): 0.000 perplexity: 40.723 speed: 3925 wps cost:  36
step / (model.input.epoch_size // 10): 0.100 perplexity: 43.935 speed: 3843 wps cost:  37
step / (model.input.epoch_size // 10): 0.200 perplexity: 43.878 speed: 3843 wps cost:  37
step / (model.input.epoch_size // 10): 0.300 perplexity: 43.891 speed: 3841 wps cost:  37
step / (model.input.epoch_size // 10): 0.400 perplexity: 43.839 speed: 3842 wps cost:  39
step / (model.input.epoch_size // 10): 0.500 perplexity: 43.732 speed: 3842 wps cost:  39
step / (model.input.epoch_size // 10): 0.600 perplexity: 43.664 speed: 3841 wps cost:  38
step / (model.input.epoch_size // 10): 0.700 perplexity: 43.632 speed: 3842 wps cost:  37
step / (model.input.epoch_size // 10): 0.800 perplexity: 43.560 speed: 3842 wps cost:  42
step / (model.input.epoch_size // 10): 0.900 perplexity: 43.487 speed: 3842 wps cost:  36
Epoch: 10 Train Perplexity: 43.558 train_allCount: 9154000 train_acc: ['0.3903', '0.5070', '0.5473'] rightCountTopK : [3573159, 4641460, 5010352]
Epoch: 10 Valid Perplexity: 70.595 valid_allCount: 1144400 valid_acc: ['0.3121', '0.4562', '0.5088'] rightCountTopK : [357137, 522026, 582300]
Epoch: 11 Learning rate: 0.008
step / (model.input.epoch_size // 10): 0.000 perplexity: 40.818 speed: 3892 wps cost:  37
step / (model.input.epoch_size // 10): 0.100 perplexity: 43.931 speed: 3846 wps cost:  39
step / (model.input.epoch_size // 10): 0.200 perplexity: 43.773 speed: 3845 wps cost:  45
step / (model.input.epoch_size // 10): 0.300 perplexity: 43.623 speed: 3843 wps cost:  39
step / (model.input.epoch_size // 10): 0.400 perplexity: 43.717 speed: 3843 wps cost:  38
step / (model.input.epoch_size // 10): 0.500 perplexity: 43.612 speed: 3842 wps cost:  34
step / (model.input.epoch_size // 10): 0.600 perplexity: 43.543 speed: 3843 wps cost:  38
step / (model.input.epoch_size // 10): 0.700 perplexity: 43.490 speed: 3843 wps cost:  37
step / (model.input.epoch_size // 10): 0.800 perplexity: 43.434 speed: 3843 wps cost:  35
step / (model.input.epoch_size // 10): 0.900 perplexity: 43.376 speed: 3843 wps cost:  37
Epoch: 11 Train Perplexity: 43.450 train_allCount: 9154000 train_acc: ['0.3906', '0.5072', '0.5474'] rightCountTopK : [3575458, 4642789, 5011086]
Epoch: 11 Valid Perplexity: 70.814 valid_allCount: 1144400 valid_acc: ['0.3111', '0.4556', '0.5085'] rightCountTopK : [356061, 521382, 581883]
Epoch: 12 Learning rate: 0.004
step / (model.input.epoch_size // 10): 0.000 perplexity: 49.154 speed: 3927 wps cost:  37
step / (model.input.epoch_size // 10): 0.100 perplexity: 43.668 speed: 3844 wps cost:  36
step / (model.input.epoch_size // 10): 0.200 perplexity: 43.723 speed: 3841 wps cost:  42
step / (model.input.epoch_size // 10): 0.300 perplexity: 43.558 speed: 3843 wps cost:  37
step / (model.input.epoch_size // 10): 0.400 perplexity: 43.647 speed: 3843 wps cost:  40
step / (model.input.epoch_size // 10): 0.500 perplexity: 43.543 speed: 3842 wps cost:  37
step / (model.input.epoch_size // 10): 0.600 perplexity: 43.478 speed: 3843 wps cost:  38
step / (model.input.epoch_size // 10): 0.700 perplexity: 43.438 speed: 3843 wps cost:  37
step / (model.input.epoch_size // 10): 0.800 perplexity: 43.394 speed: 3843 wps cost:  36
step / (model.input.epoch_size // 10): 0.900 perplexity: 43.341 speed: 3843 wps cost:  35
Epoch: 12 Train Perplexity: 43.411 train_allCount: 9154000 train_acc: ['0.3907', '0.5072', '0.5476'] rightCountTopK : [3576299, 4643328, 5012993]
Epoch: 12 Valid Perplexity: 70.680 valid_allCount: 1144400 valid_acc: ['0.3113', '0.4559', '0.5088'] rightCountTopK : [356287, 521718, 582218]
Epoch: 13 Learning rate: 0.002
step / (model.input.epoch_size // 10): 0.000 perplexity: 45.617 speed: 3908 wps cost:  38
step / (model.input.epoch_size // 10): 0.100 perplexity: 43.712 speed: 3842 wps cost:  40
step / (model.input.epoch_size // 10): 0.200 perplexity: 43.729 speed: 3842 wps cost:  37
step / (model.input.epoch_size // 10): 0.300 perplexity: 43.569 speed: 3843 wps cost:  42
step / (model.input.epoch_size // 10): 0.400 perplexity: 43.548 speed: 3843 wps cost:  38
step / (model.input.epoch_size // 10): 0.500 perplexity: 43.467 speed: 3843 wps cost:  38
step / (model.input.epoch_size // 10): 0.600 perplexity: 43.436 speed: 3843 wps cost:  40
step / (model.input.epoch_size // 10): 0.700 perplexity: 43.394 speed: 3843 wps cost:  36
step / (model.input.epoch_size // 10): 0.800 perplexity: 43.345 speed: 3843 wps cost:  40
step / (model.input.epoch_size // 10): 0.900 perplexity: 43.329 speed: 3842 wps cost:  35
Epoch: 13 Train Perplexity: 43.408 train_allCount: 9154000 train_acc: ['0.3907', '0.5073', '0.5477'] rightCountTopK : [3576769, 4643785, 5013305]
Epoch: 13 Valid Perplexity: 71.100 valid_allCount: 1144400 valid_acc: ['0.3102', '0.4548', '0.5080'] rightCountTopK : [354976, 520424, 581309]
Test Perplexity: 67.858 test_allCount: 1147370.000 test_acc: ['0.3185', '0.4631', '0.5162'] rightCountTopK : [365393, 531335, 592275]
Saving model to /home/pubsrv/data/guorui/data/Res/rand_1w_400d_att_prePro.
Finished!
当前的日期和时间是 2018-01-16 01:48:25.333046
